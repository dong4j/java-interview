---
sidebar: auto
prev: ../io/
next: ../concurrent/
title: é›†åˆ
date: 2019-03-05 15:39
author: dong4j
tags:
- Java
- é¢è¯•é¢˜
- é›†åˆ
---

::: tip 

é›†åˆç›¸å…³é¢è¯•é¢˜æ•´ç†

:::

<!-- more -->

[[toc]]

[TOC]

## List Set Map ä¸‰è€…çš„åŒºåˆ«

- **[ğŸ‘‰ List](./list.md)(å¯¹ä»˜é¡ºåºçš„å¥½å¸®æ‰‹)ï¼š** Listæ¥å£å­˜å‚¨ä¸€ç»„ä¸å”¯ä¸€ï¼ˆå¯ä»¥æœ‰å¤šä¸ªå…ƒç´ å¼•ç”¨ç›¸åŒçš„å¯¹è±¡ï¼‰ï¼Œæœ‰åºçš„å¯¹è±¡
- **[ğŸ‘‰ Set](./set.md)(æ³¨é‡ç‹¬ä¸€æ— äºŒçš„æ€§è´¨):** ä¸å…è®¸é‡å¤çš„é›†åˆ. ä¸ä¼šæœ‰å¤šä¸ªå…ƒç´ å¼•ç”¨ç›¸åŒçš„å¯¹è±¡. 
- **[ğŸ‘‰ Map](./map.md)(ç”¨Keyæ¥æœç´¢çš„ä¸“å®¶):** ä½¿ç”¨é”®å€¼å¯¹å­˜å‚¨. Mapä¼šç»´æŠ¤ä¸Keyæœ‰å…³è”çš„å€¼. ä¸¤ä¸ªKeyå¯ä»¥å¼•ç”¨ç›¸åŒçš„å¯¹è±¡ï¼Œä½†Keyä¸èƒ½é‡å¤ï¼Œå…¸å‹çš„Keyæ˜¯Stringç±»å‹ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯ä»»ä½•å¯¹è±¡. 

## ArrayList å’Œ LinkedList  çš„åŒºåˆ«

- **æ˜¯å¦ä¿è¯çº¿ç¨‹å®‰å…¨ï¼š** `ArrayList` å’Œ `LinkedList` éƒ½æ˜¯ä¸åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯ä¸ä¿è¯çº¿ç¨‹å®‰å…¨ï¼›
- **åº•å±‚æ•°æ®ç»“æ„ï¼š** `Arraylist` åº•å±‚ä½¿ç”¨çš„æ˜¯ **Object æ•°ç»„**ï¼›`LinkedList` åº•å±‚ä½¿ç”¨çš„æ˜¯ **åŒå‘é“¾è¡¨** æ•°æ®ç»“æ„ï¼ˆJDK1.6ä¹‹å‰ä¸ºå¾ªç¯é“¾è¡¨ï¼ŒJDK1.7å–æ¶ˆäº†å¾ªç¯. æ³¨æ„åŒå‘é“¾è¡¨å’ŒåŒå‘å¾ªç¯é“¾è¡¨çš„åŒºåˆ«ï¼Œä¸‹é¢æœ‰ä»‹ç»åˆ°ï¼ï¼‰
- **æ’å…¥å’Œåˆ é™¤æ˜¯å¦å—å…ƒç´ ä½ç½®çš„å½±å“ï¼š** 
  - **ArrayList é‡‡ç”¨æ•°ç»„å­˜å‚¨ï¼Œæ‰€ä»¥æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦å—å…ƒç´ ä½ç½®çš„å½±å“. ** æ¯”å¦‚ï¼šæ‰§è¡Œ`add(E e) `æ–¹æ³•çš„æ—¶å€™ï¼Œ `ArrayList` ä¼šé»˜è®¤åœ¨å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾ï¼Œè¿™ç§æƒ…å†µæ—¶é—´å¤æ‚åº¦å°±æ˜¯O(1). ä½†æ˜¯å¦‚æœè¦åœ¨æŒ‡å®šä½ç½® i æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„è¯ï¼ˆ`add(int index, E element) `ï¼‰æ—¶é—´å¤æ‚åº¦å°±ä¸º O(n-i). å› ä¸ºåœ¨è¿›è¡Œä¸Šè¿°æ“ä½œçš„æ—¶å€™é›†åˆä¸­ç¬¬ i å’Œç¬¬ i ä¸ªå…ƒç´ ä¹‹åçš„(n-i)ä¸ªå…ƒç´ éƒ½è¦æ‰§è¡Œå‘åä½/å‘å‰ç§»ä¸€ä½çš„æ“ä½œ.  
  - **LinkedList é‡‡ç”¨é“¾è¡¨å­˜å‚¨ï¼Œæ‰€ä»¥æ’å…¥ï¼Œåˆ é™¤å…ƒç´ æ—¶é—´å¤æ‚åº¦ä¸å—å…ƒç´ ä½ç½®çš„å½±å“ï¼Œéƒ½æ˜¯è¿‘ä¼¼ Oï¼ˆ1ï¼‰è€Œæ•°ç»„ä¸ºè¿‘ä¼¼ Oï¼ˆnï¼‰. **
- **æ˜¯å¦æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ï¼š** `LinkedList` ä¸æ”¯æŒé«˜æ•ˆçš„éšæœºå…ƒç´ è®¿é—®ï¼Œè€Œ `ArrayList` æ”¯æŒ. å¿«é€Ÿéšæœºè®¿é—®å°±æ˜¯é€šè¿‡å…ƒç´ çš„åºå·å¿«é€Ÿè·å–å…ƒç´ å¯¹è±¡(å¯¹åº”äº`get(int index) `æ–¹æ³•). 
- **å†…å­˜ç©ºé—´å ç”¨ï¼š** ArrayListçš„ç©º é—´æµªè´¹ä¸»è¦ä½“ç°åœ¨åœ¨liståˆ—è¡¨çš„ç»“å°¾ä¼šé¢„ç•™ä¸€å®šçš„å®¹é‡ç©ºé—´ï¼Œè€ŒLinkedListçš„ç©ºé—´èŠ±è´¹åˆ™ä½“ç°åœ¨å®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½éœ€è¦æ¶ˆè€—æ¯”ArrayListæ›´å¤šçš„ç©ºé—´ï¼ˆå› ä¸ºè¦å­˜æ”¾ç›´æ¥åç»§å’Œç›´æ¥å‰é©±ä»¥åŠæ•°æ®ï¼‰

## ArrayList å’Œ Vector çš„åŒºåˆ«

- Vector æ˜¯åŒæ­¥çš„ï¼Œå› æ­¤å¼€é”€å°±æ¯” ArrayList è¦å¤§ï¼Œè®¿é—®é€Ÿåº¦æ›´æ…¢ã€‚æœ€å¥½ä½¿ç”¨ ArrayList è€Œä¸æ˜¯ Vectorï¼Œå› ä¸ºåŒæ­¥æ“ä½œå®Œå…¨å¯ä»¥ç”±ç¨‹åºå‘˜è‡ªå·±æ¥æ§åˆ¶ï¼›
- Vector æ¯æ¬¡æ‰©å®¹è¯·æ±‚å…¶å¤§å°çš„ `2` å€ç©ºé—´ï¼Œè€Œ ArrayList æ˜¯ `1.5` å€ã€‚

## HashMap å’Œ HashTable çš„åŒºåˆ«

1. **çº¿ç¨‹æ˜¯å¦å®‰å…¨ï¼š** HashMap æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼ŒHashTable æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼›HashTable å†…éƒ¨çš„æ–¹æ³•åŸºæœ¬éƒ½ç»è¿‡`synchronized` ä¿®é¥°ã€‚ï¼ˆå¦‚æœä½ è¦ä¿è¯çº¿ç¨‹å®‰å…¨çš„è¯å°±ä½¿ç”¨ ConcurrentHashMap å§ï¼ï¼‰ï¼›
2. **æ•ˆç‡ï¼š** å› ä¸ºçº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼ŒHashMap è¦æ¯” HashTable æ•ˆç‡é«˜ä¸€ç‚¹ã€‚å¦å¤–ï¼ŒHashTable åŸºæœ¬è¢«æ·˜æ±°ï¼Œä¸è¦åœ¨ä»£ç ä¸­ä½¿ç”¨å®ƒï¼›
3. **å¯¹ Null key å’Œ Null value çš„æ”¯æŒï¼š** HashMap ä¸­ï¼Œnull å¯ä»¥ä½œä¸ºé”®ï¼Œè¿™æ ·çš„é”®åªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªé”®æ‰€å¯¹åº”çš„å€¼ä¸º nullã€‚ä½†æ˜¯åœ¨ HashTable ä¸­ put è¿›çš„é”®å€¼åªè¦æœ‰ä¸€ä¸ª nullï¼Œç›´æ¥æŠ›å‡º NullPointerExceptionã€‚

4. **åˆå§‹å®¹é‡å¤§å°å’Œæ¯æ¬¡æ‰©å……å®¹é‡å¤§å°çš„ä¸åŒ ï¼š** 
   1. åˆ›å»ºæ—¶å¦‚æœä¸æŒ‡å®šå®¹é‡åˆå§‹å€¼ï¼ŒHashtable é»˜è®¤çš„åˆå§‹å¤§å°ä¸º `11`ï¼Œä¹‹åæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„`2n+1`ã€‚HashMap é»˜è®¤çš„åˆå§‹åŒ–å¤§å°ä¸º `16`ã€‚ä¹‹åæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„ `2` å€ã€‚
   2. åˆ›å»ºæ—¶å¦‚æœç»™å®šäº†å®¹é‡åˆå§‹å€¼ï¼Œé‚£ä¹ˆ Hashtable ä¼šç›´æ¥ä½¿ç”¨ä½ ç»™å®šçš„å¤§å°ï¼Œè€Œ HashMap ä¼šå°†å…¶æ‰©å……ä¸º `2` çš„å¹‚æ¬¡æ–¹å¤§å°ï¼ˆHashMap ä¸­çš„`tableSizeFor()`æ–¹æ³•ä¿è¯ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ HashMap æ€»æ˜¯ä½¿ç”¨ `2` çš„å¹‚ä½œä¸ºå“ˆå¸Œè¡¨çš„å¤§å°

5. **åº•å±‚æ•°æ®ç»“æ„ï¼š** JDK1.8 ä»¥åçš„ HashMap åœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ã€‚Hashtable æ²¡æœ‰è¿™æ ·çš„æœºåˆ¶ã€‚

## HashMap å’Œ HashSet åŒºåˆ«

å¦‚æœä½ çœ‹è¿‡ `HashSet` æºç çš„è¯å°±åº”è¯¥çŸ¥é“ï¼šHashSet åº•å±‚å°±æ˜¯åŸºäº HashMap å®ç°çš„ã€‚ï¼ˆHashSet çš„æºç éå¸¸éå¸¸å°‘ï¼Œå› ä¸ºé™¤äº† `clone() `ã€`writeObject()`ã€`readObject()`æ˜¯ HashSet è‡ªå·±ä¸å¾—ä¸å®ç°ä¹‹å¤–ï¼Œå…¶ä»–æ–¹æ³•éƒ½æ˜¯ç›´æ¥è°ƒç”¨ HashMap ä¸­çš„æ–¹æ³•ã€‚

| HashMap                            | HashSet                                                      |
| ---------------------------------- | ------------------------------------------------------------ |
| å®ç°äº† Map æ¥å£                    | å®ç° Set æ¥å£                                                |
| å­˜å‚¨é”®å€¼å¯¹                         | ä»…å­˜å‚¨å¯¹è±¡                                                   |
| è°ƒç”¨ `putï¼ˆï¼‰`å‘ map ä¸­æ·»åŠ å…ƒç´     | è°ƒç”¨ `addï¼ˆï¼‰`æ–¹æ³•å‘ Set ä¸­æ·»åŠ å…ƒç´                           |
| HashMap ä½¿ç”¨é”®ï¼ˆKeyï¼‰è®¡ç®— Hashcode | HashSet ä½¿ç”¨æˆå‘˜å¯¹è±¡æ¥è®¡ç®— hashcode å€¼ï¼Œå¯¹äºä¸¤ä¸ªå¯¹è±¡æ¥è¯´ hashcode å¯èƒ½ç›¸åŒï¼Œæ‰€ä»¥ equals() æ–¹æ³•ç”¨æ¥åˆ¤æ–­å¯¹è±¡çš„ç›¸ç­‰æ€§ï¼Œ |

## HashSet å¦‚ä½•æ£€æŸ¥é‡å¤

å½“ä½ æŠŠå¯¹è±¡åŠ å…¥`HashSet`æ—¶ï¼ŒHashSet ä¼šå…ˆè®¡ç®—å¯¹è±¡çš„`hashcode`å€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼ŒåŒæ—¶ä¹Ÿä¼šä¸å…¶ä»–åŠ å…¥çš„å¯¹è±¡çš„ hashcode å€¼ä½œæ¯”è¾ƒï¼Œå¦‚æœæ²¡æœ‰ç›¸ç¬¦çš„ hashcodeï¼ŒHashSet ä¼šå‡è®¾å¯¹è±¡æ²¡æœ‰é‡å¤å‡ºç°ã€‚

ä½†æ˜¯å¦‚æœå‘ç°æœ‰ç›¸åŒ hashcode å€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨ `equalsï¼ˆï¼‰` æ–¹æ³•æ¥æ£€æŸ¥ hashcode ç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚

å¦‚æœä¸¤è€…ç›¸åŒï¼ŒHashSet å°±ä¸ä¼šè®©åŠ å…¥æ“ä½œæˆåŠŸ

[ğŸ‘‰ æ€ä¹ˆå‘ Set ä¸­å­˜å…¥ç›¸åŒçš„å­—ç¬¦ä¸²](../se/string_kind.md#æ€ä¹ˆå‘-set-ä¸­å­˜å…¥ç›¸åŒçš„å­—ç¬¦ä¸²)

**hashCodeï¼ˆï¼‰ä¸equalsï¼ˆï¼‰çš„ç›¸å…³è§„å®šï¼š**

1. å¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œåˆ™hashcodeä¸€å®šä¹Ÿæ˜¯ç›¸åŒçš„
2. ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰,å¯¹ä¸¤ä¸ªequalsæ–¹æ³•è¿”å›true
3. ä¸¤ä¸ªå¯¹è±¡æœ‰ç›¸åŒçš„hashcodeå€¼ï¼Œå®ƒä»¬ä¹Ÿä¸ä¸€å®šæ˜¯ç›¸ç­‰çš„
4. ç»¼ä¸Šï¼Œequalsæ–¹æ³•è¢«è¦†ç›–è¿‡ï¼Œåˆ™hashCodeæ–¹æ³•ä¹Ÿå¿…é¡»è¢«è¦†ç›–
5. hashCode()çš„é»˜è®¤è¡Œä¸ºæ˜¯å¯¹å †ä¸Šçš„å¯¹è±¡äº§ç”Ÿç‹¬ç‰¹å€¼ã€‚å¦‚æœæ²¡æœ‰é‡å†™hashCode()ï¼Œåˆ™è¯¥classçš„ä¸¤ä¸ªå¯¹è±¡æ— è®ºå¦‚ä½•éƒ½ä¸ä¼šç›¸ç­‰ï¼ˆå³ä½¿è¿™ä¸¤ä¸ªå¯¹è±¡æŒ‡å‘ç›¸åŒçš„æ•°æ®ï¼‰ã€‚

**== ä¸equals çš„åŒºåˆ«**

1. == æ˜¯åˆ¤æ–­ä¸¤ä¸ªå˜é‡æˆ–å®ä¾‹æ˜¯ä¸æ˜¯æŒ‡å‘åŒä¸€ä¸ªå†…å­˜ç©ºé—´ equalsæ˜¯åˆ¤æ–­ä¸¤ä¸ªå˜é‡æˆ–å®ä¾‹æ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´çš„å€¼æ˜¯ä¸æ˜¯ç›¸åŒ
2. == æ˜¯æŒ‡å¯¹å†…å­˜åœ°å€è¿›è¡Œæ¯”è¾ƒ equals()æ˜¯å¯¹å­—ç¬¦ä¸²çš„å†…å®¹è¿›è¡Œæ¯”è¾ƒ
3. == æŒ‡å¼•ç”¨æ˜¯å¦ç›¸åŒ equals()æŒ‡çš„æ˜¯å€¼æ˜¯å¦ç›¸åŒ

## JDK7 ä¸ JDK8 ä¸­ HashMap çš„å®ç°

## HashMapå’ŒConcurrentHashMapçš„åŒºåˆ«, HashMapçš„åº•å±‚æºç 
## ConcurrentHashMapèƒ½å®Œå…¨æ›¿ä»£HashTableå—
## ä¸ºä»€ä¹ˆHashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„
## å¦‚ä½•çº¿ç¨‹å®‰å…¨çš„ä½¿ç”¨HashMap
## å¤šå¹¶å‘æƒ…å†µä¸‹HashMapæ˜¯å¦è¿˜ä¼šäº§ç”Ÿæ­»å¾ªç¯
## TreeMapã€HashMapã€LindedHashMapçš„åŒºåˆ«

48) Listã€Setã€Map å’Œ Queue ä¹‹é—´çš„åŒºåˆ« 
49ï¼‰poll() æ–¹æ³•å’Œ remove() æ–¹æ³•çš„åŒºåˆ«ï¼Ÿ 
50ï¼‰Java ä¸­ LinkedHashMap å’Œ PriorityQueue çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ 
51ï¼‰ArrayList ä¸ LinkedList çš„ä¸åŒºåˆ«ï¼Ÿ 
52ï¼‰ç”¨å“ªä¸¤ç§æ–¹å¼æ¥å®ç°é›†åˆçš„æ’åºï¼Ÿ 
53ï¼‰Java ä¸­æ€ä¹ˆæ‰“å°æ•°ç»„ï¼Ÿ 
54ï¼‰Java ä¸­çš„ LinkedList æ˜¯å•å‘é“¾è¡¨è¿˜æ˜¯åŒå‘é“¾è¡¨ï¼Ÿ 
55ï¼‰Java ä¸­çš„ TreeMap æ˜¯é‡‡ç”¨ä»€ä¹ˆæ ‘å®ç°çš„ï¼Ÿ 
56) Hashtable ä¸ HashMap æœ‰ä»€ä¹ˆä¸åŒä¹‹å¤„ï¼Ÿ 
57ï¼‰Java ä¸­çš„ HashSetï¼Œå†…éƒ¨æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ 
58ï¼‰å†™ä¸€æ®µä»£ç åœ¨éå† ArrayList æ—¶ç§»é™¤ä¸€ä¸ªå…ƒç´ ï¼Ÿ 
59ï¼‰æˆ‘ä»¬èƒ½è‡ªå·±å†™ä¸€ä¸ªå®¹å™¨ç±»ï¼Œç„¶åä½¿ç”¨ for-each å¾ªç¯ç ï¼Ÿ 
60ï¼‰ArrayList å’Œ HashMap çš„é»˜è®¤å¤§å°æ˜¯å¤šæ•°ï¼Ÿ 
61ï¼‰æœ‰æ²¡æœ‰å¯èƒ½ä¸¤ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡æœ‰æœ‰ç›¸åŒçš„ hashcodeï¼Ÿ 
62ï¼‰ä¸¤ä¸ªç›¸åŒçš„å¯¹è±¡ä¼šæœ‰ä¸åŒçš„çš„ hash code å—ï¼Ÿ 
63ï¼‰æˆ‘ä»¬å¯ä»¥åœ¨ hashcode() ä¸­ä½¿ç”¨éšæœºæ•°å­—å—ï¼Ÿ 
64ï¼‰Java ä¸­ï¼ŒComparator ä¸ Comparable æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ
* fail-fast ä¸ fail-safe æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«

18.java å®¹å™¨éƒ½æœ‰å“ªäº›ï¼Ÿ

19.Collection å’Œ Collections æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

20.Listã€Setã€Map ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

21.HashMap å’Œ Hashtable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

22.å¦‚ä½•å†³å®šä½¿ç”¨ HashMap è¿˜æ˜¯ TreeMapï¼Ÿ

23.è¯´ä¸€ä¸‹ HashMap çš„å®ç°åŸç†ï¼Ÿ

24.è¯´ä¸€ä¸‹ HashSet çš„å®ç°åŸç†ï¼Ÿ

25.ArrayList å’Œ LinkedList çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

26.å¦‚ä½•å®ç°æ•°ç»„å’Œ List ä¹‹é—´çš„è½¬æ¢ï¼Ÿ

27.ArrayList å’Œ Vector çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

28.Array å’Œ ArrayList æœ‰ä½•åŒºåˆ«ï¼Ÿ

29.åœ¨ Queue ä¸­ poll()å’Œ remove()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

30.å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ

31.è¿­ä»£å™¨ Iterator æ˜¯ä»€ä¹ˆï¼Ÿ

32.Iterator æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ

33.Iterator å’Œ ListIterator æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

34.æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ

å¸¸ç”¨é›†åˆç±»çš„ä½¿ç”¨ã€ArrayList å’Œ LinkedList å’Œ Vector çš„åŒºåˆ« ã€SynchronizedList å’Œ Vector çš„åŒºåˆ«ã€HashMapã€HashTableã€ConcurrentHashMap åŒºåˆ«ã€

Set å’Œ List åŒºåˆ«ï¼ŸSet å¦‚ä½•ä¿è¯å…ƒç´ ä¸é‡å¤ï¼Ÿ

Java 8 ä¸­ stream ç›¸å…³ç”¨æ³•ã€apache é›†åˆå¤„ç†å·¥å…·ç±»çš„ä½¿ç”¨ã€ä¸åŒç‰ˆæœ¬çš„ JDK ä¸­ HashMap çš„å®ç°çš„åŒºåˆ«ä»¥åŠåŸå› 

Collection å’Œ Collections åŒºåˆ«

Arrays.asList è·å¾—çš„ List ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä»€ä¹ˆ

Enumeration å’Œ Iterator åŒºåˆ«

fail-fast å’Œ fail-safe

CopyOnWriteArrayListã€ConcurrentSkipListMap

## Iteraterå’ŒListIteratorä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
- ä½¿ç”¨Iteratoræ¥éå†Setå’ŒListé›†åˆ, è€ŒListIteratoråªèƒ½éå†List.
- iteratoråªå¯ä»¥å‘å‰éå†, è€ŒLIstIteratorå¯ä»¥åŒå‘éå†.
- ListIteratorä»Iteratoræ¥å£ç»§æ‰¿, ç„¶åæ·»åŠ äº†ä¸€äº›é¢å¤–çš„åŠŸèƒ½, æ¯”å¦‚æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€æ›¿æ¢ä¸€ä¸ªå…ƒç´ ã€è·å–å‰é¢æˆ–åé¢å…ƒç´ çš„ç´¢å¼•ä½ç½®.

## é€šè¿‡è¿­ä»£å™¨fail-fastå±æ€§, ä½ æ˜ç™½äº†ä»€ä¹ˆï¼Ÿ
æ¯æ¬¡æˆ‘ä»¬å°è¯•è·å–ä¸‹ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™, Iterator fail-fastå±æ€§æ£€æŸ¥å½“å‰é›†åˆç»“æ„é‡Œçš„ä»»ä½•æ”¹åŠ¨.å¦‚æœå‘ç°ä»»ä½•æ”¹åŠ¨, å®ƒæŠ›å‡ºConcurrentModificationException.Collectionä¸­æ‰€æœ‰Iteratorçš„å®ç°éƒ½æ˜¯æŒ‰fail-fastæ¥è®¾è®¡çš„ï¼ˆConcurrentHashMapå’ŒCopyOnWriteArrayListè¿™ç±»å¹¶å‘é›†åˆç±»é™¤å¤–ï¼‰.

## fail-fastä¸fail-safeæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
Iteratorçš„fail-fastå±æ€§ä¸å½“å‰çš„é›†åˆå…±åŒèµ·ä½œç”¨, å› æ­¤å®ƒä¸ä¼šå—åˆ°é›†åˆä¸­ä»»ä½•æ”¹åŠ¨çš„å½±å“.Java.utilåŒ…ä¸­çš„æ‰€æœ‰é›†åˆç±»éƒ½è¢«è®¾è®¡ä¸ºfail-fastçš„, è€Œjava.util.concurrentä¸­çš„é›†åˆç±»éƒ½ä¸ºfail-safeçš„.Fail-fastè¿­ä»£å™¨æŠ›å‡ºConcurrentModificationException, è€Œfail-safeè¿­ä»£å™¨ä»ä¸æŠ›å‡ºConcurrentModificationException.

## UnsupportedOperationExceptionæ˜¯ä»€ä¹ˆï¼Ÿ
UnsupportedOperationExceptionæ˜¯ç”¨äºè¡¨æ˜æ“ä½œä¸æ”¯æŒçš„å¼‚å¸¸.åœ¨JDKç±»ä¸­å·²è¢«å¤§é‡è¿ç”¨, åœ¨é›†åˆæ¡†æ¶java.util.Collections.UnmodifiableCollectionå°†ä¼šåœ¨æ‰€æœ‰addå’Œremoveæ“ä½œä¸­æŠ›å‡ºè¿™ä¸ªå¼‚å¸¸.

## åœ¨Javaä¸­, HashMapæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ
HashMapåœ¨Map.Entryé™æ€å†…éƒ¨ç±»å®ç°ä¸­å­˜å‚¨key-valueå¯¹.HashMapä½¿ç”¨å“ˆå¸Œç®—æ³•, åœ¨putå’Œgetæ–¹æ³•ä¸­, å®ƒä½¿ç”¨hashCode()å’Œequals()æ–¹æ³•.å½“æˆ‘ä»¬é€šè¿‡ä¼ é€’key-valueå¯¹è°ƒç”¨putæ–¹æ³•çš„æ—¶å€™, HashMapä½¿ç”¨Key hashCode()å’Œå“ˆå¸Œç®—æ³•æ¥æ‰¾å‡ºå­˜å‚¨key-valueå¯¹çš„ç´¢å¼•.Entryå­˜å‚¨åœ¨LinkedListä¸­, æ‰€ä»¥å¦‚æœå­˜åœ¨entry, å®ƒä½¿ç”¨equals()æ–¹æ³•æ¥æ£€æŸ¥ä¼ é€’çš„keyæ˜¯å¦å·²ç»å­˜åœ¨, å¦‚æœå­˜åœ¨, å®ƒä¼šè¦†ç›–value, å¦‚æœä¸å­˜åœ¨, å®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„entryç„¶åä¿å­˜.å½“æˆ‘ä»¬é€šè¿‡ä¼ é€’keyè°ƒç”¨getæ–¹æ³•æ—¶, å®ƒå†æ¬¡ä½¿ç”¨hashCode()æ¥æ‰¾åˆ°æ•°ç»„ä¸­çš„ç´¢å¼•, ç„¶åä½¿ç”¨equals()æ–¹æ³•æ‰¾å‡ºæ­£ç¡®çš„Entry, ç„¶åè¿”å›å®ƒçš„å€¼.ä¸‹é¢çš„å›¾ç‰‡è§£é‡Šäº†è¯¦ç»†å†…å®¹.

å…¶å®ƒå…³äºHashMapæ¯”è¾ƒé‡è¦çš„é—®é¢˜æ˜¯å®¹é‡ã€è´Ÿè·ç³»æ•°å’Œé˜€å€¼è°ƒæ•´.HashMapé»˜è®¤çš„åˆå§‹å®¹é‡æ˜¯32, è´Ÿè·ç³»æ•°æ˜¯0.75.é˜€å€¼æ˜¯ä¸ºè´Ÿè·ç³»æ•°ä¹˜ä»¥å®¹é‡, æ— è®ºä½•æ—¶æˆ‘ä»¬å°è¯•æ·»åŠ ä¸€ä¸ªentry, å¦‚æœmapçš„å¤§å°æ¯”é˜€å€¼å¤§çš„æ—¶å€™, HashMapä¼šå¯¹mapçš„å†…å®¹è¿›è¡Œé‡æ–°å“ˆå¸Œ, ä¸”ä½¿ç”¨æ›´å¤§çš„å®¹é‡.å®¹é‡æ€»æ˜¯2çš„å¹‚, æ‰€ä»¥å¦‚æœä½ çŸ¥é“ä½ éœ€è¦å­˜å‚¨å¤§é‡çš„key-valueå¯¹, æ¯”å¦‚ç¼“å­˜ä»æ•°æ®åº“é‡Œé¢æ‹‰å–çš„æ•°æ®, ä½¿ç”¨æ­£ç¡®çš„å®¹é‡å’Œè´Ÿè·ç³»æ•°å¯¹HashMapè¿›è¡Œåˆå§‹åŒ–æ˜¯ä¸ªä¸é”™çš„åšæ³•.

## hashCode()å’Œequals()æ–¹æ³•æœ‰ä½•é‡è¦æ€§ï¼Ÿ
HashMapä½¿ç”¨Keyå¯¹è±¡çš„hashCode()å’Œequals()æ–¹æ³•å»å†³å®škey-valueå¯¹çš„ç´¢å¼•.å½“æˆ‘ä»¬è¯•ç€ä»HashMapä¸­è·å–å€¼çš„æ—¶å€™, è¿™äº›æ–¹æ³•ä¹Ÿä¼šè¢«ç”¨åˆ°.å¦‚æœè¿™äº›æ–¹æ³•æ²¡æœ‰è¢«æ­£ç¡®åœ°å®ç°, åœ¨è¿™ç§æƒ…å†µä¸‹, ä¸¤ä¸ªä¸åŒKeyä¹Ÿè®¸ä¼šäº§ç”Ÿç›¸åŒçš„hashCode()å’Œequals()è¾“å‡º, HashMapå°†ä¼šè®¤ä¸ºå®ƒä»¬æ˜¯ç›¸åŒçš„, ç„¶åè¦†ç›–å®ƒä»¬, è€ŒéæŠŠå®ƒä»¬å­˜å‚¨åˆ°ä¸åŒçš„åœ°æ–¹.åŒæ ·çš„, æ‰€æœ‰ä¸å…è®¸å­˜å‚¨é‡å¤æ•°æ®çš„é›†åˆç±»éƒ½ä½¿ç”¨hashCode()å’Œequals()å»æŸ¥æ‰¾é‡å¤, æ‰€ä»¥æ­£ç¡®å®ç°å®ƒä»¬éå¸¸é‡è¦.equals()å’ŒhashCode()çš„å®ç°åº”è¯¥éµå¾ªä»¥ä¸‹è§„åˆ™:

- å¦‚æœo1.equals(o2)ä¸ºtrue, é‚£ä¹ˆo1.hashCode() == o2.hashCode()æ€»æ˜¯ä¸ºtrueçš„.
- å¦‚æœo1.hashCode() == o2.hashCode(), å¹¶ä¸æ„å‘³ç€o1.equals(o2)ä¼šä¸ºtrue.

## å¦‚ä½•å†³å®šé€‰ç”¨HashMapè¿˜æ˜¯TreeMapï¼Ÿ
å¯¹äºåœ¨Mapä¸­æ’å…¥ã€åˆ é™¤å’Œå®šä½å…ƒç´ è¿™ç±»æ“ä½œ, HashMapæ˜¯æœ€å¥½çš„é€‰æ‹©.ç„¶è€Œ, å‡å¦‚ä½ éœ€è¦å¯¹ä¸€ä¸ªæœ‰åºçš„keyé›†åˆè¿›è¡Œéå†, TreeMapæ˜¯æ›´å¥½çš„é€‰æ‹©.åŸºäºä½ çš„collectionçš„å¤§å°, ä¹Ÿè®¸å‘HashMapä¸­æ·»åŠ å…ƒç´ ä¼šæ›´å¿«, å°†mapæ¢ä¸ºTreeMapè¿›è¡Œæœ‰åºkeyçš„éå†.

## Comparableå’ŒComparatoræ¥å£æ˜¯ä»€ä¹ˆï¼Ÿ
å¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨Arrayæˆ–Collectionçš„æ’åºæ–¹æ³•æ—¶, éœ€è¦åœ¨è‡ªå®šä¹‰ç±»é‡Œå®ç°Javaæä¾›Comparableæ¥å£.Comparableæ¥å£æœ‰compareTo(T OBJ)æ–¹æ³•, å®ƒè¢«æ’åºæ–¹æ³•æ‰€ä½¿ç”¨.æˆ‘ä»¬åº”è¯¥é‡å†™è¿™ä¸ªæ–¹æ³•, å¦‚æœâ€œthisâ€å¯¹è±¡æ¯”ä¼ é€’çš„å¯¹è±¡å‚æ•°æ›´å°ã€ç›¸ç­‰æˆ–æ›´å¤§æ—¶, å®ƒè¿”å›ä¸€ä¸ªè´Ÿæ•´æ•°ã€0æˆ–æ­£æ•´æ•°.ä½†æ˜¯, åœ¨å¤§å¤šæ•°å®é™…æƒ…å†µä¸‹, æˆ‘ä»¬æƒ³æ ¹æ®ä¸åŒå‚æ•°è¿›è¡Œæ’åº.æ¯”å¦‚, ä½œä¸ºä¸€ä¸ªCEO, æˆ‘æƒ³å¯¹é›‡å‘˜åŸºäºè–ªèµ„è¿›è¡Œæ’åº, ä¸€ä¸ªHRæƒ³åŸºäºå¹´é¾„å¯¹ä»–ä»¬è¿›è¡Œæ’åº.è¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦ä½¿ç”¨Comparatoræ¥å£çš„æƒ…æ™¯, å› ä¸ºComparable.compareTo(Object o)æ–¹æ³•å®ç°åªèƒ½åŸºäºä¸€ä¸ªå­—æ®µè¿›è¡Œæ’åº, æˆ‘ä»¬ä¸èƒ½æ ¹æ®å¯¹è±¡æ’åºçš„éœ€è¦é€‰æ‹©å­—æ®µ.
Comparatoræ¥å£çš„compare(Object o1, Object o2)æ–¹æ³•çš„å®ç°éœ€è¦ä¼ é€’ä¸¤ä¸ªå¯¹è±¡å‚æ•°, è‹¥ç¬¬ä¸€ä¸ªå‚æ•°æ¯”ç¬¬äºŒä¸ªå°, è¿”å›è´Ÿæ•´æ•°ï¼›è‹¥ç¬¬ä¸€ä¸ªç­‰äºç¬¬äºŒä¸ª, è¿”å›0ï¼›è‹¥ç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§, è¿”å›æ­£æ•´æ•°.

## å½“ä¸€ä¸ªé›†åˆè¢«ä½œä¸ºå‚æ•°ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°æ—¶, å¦‚ä½•æ‰å¯ä»¥ç¡®ä¿å‡½æ•°ä¸èƒ½ä¿®æ”¹å®ƒï¼Ÿ
åœ¨ä½œä¸ºå‚æ•°ä¼ é€’ä¹‹å‰, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨**Collections.unmodifiableCollection(Collection c)**æ–¹æ³•åˆ›å»ºä¸€ä¸ªåªè¯»é›†åˆ, è¿™å°†ç¡®ä¿æ”¹å˜é›†åˆçš„ä»»ä½•æ“ä½œéƒ½ä¼šæŠ›å‡ºUnsupportedOperationException.

## å¤§å†™çš„Oæ˜¯ä»€ä¹ˆï¼Ÿä¸¾å‡ ä¸ªä¾‹å­ï¼Ÿ
å¤§å†™çš„Oæè¿°çš„æ˜¯, å°±æ•°æ®ç»“æ„ä¸­çš„ä¸€ç³»åˆ—å…ƒç´ è€Œè¨€, ä¸€ä¸ªç®—æ³•çš„æ€§èƒ½.Collectionç±»å°±æ˜¯å®é™…çš„æ•°æ®ç»“æ„, æˆ‘ä»¬é€šå¸¸åŸºäºæ—¶é—´ã€å†…å­˜å’Œæ€§èƒ½, ä½¿ç”¨å¤§å†™çš„Oæ¥é€‰æ‹©é›†åˆå®ç°.
æ¯”å¦‚:
ä¾‹å­1:ArrayListçš„get(index i)æ˜¯ä¸€ä¸ªå¸¸é‡æ—¶é—´æ“ä½œ, å®ƒä¸ä¾èµ–listä¸­å…ƒç´ çš„æ•°é‡.æ‰€ä»¥å®ƒçš„æ€§èƒ½æ˜¯O(1).
ä¾‹å­2:ä¸€ä¸ªå¯¹äºæ•°ç»„æˆ–åˆ—è¡¨çš„çº¿æ€§æœç´¢çš„æ€§èƒ½æ˜¯O(n), å› ä¸ºæˆ‘ä»¬éœ€è¦éå†æ‰€æœ‰çš„å…ƒç´ æ¥æŸ¥æ‰¾éœ€è¦çš„å…ƒç´ .

## ä¸Javaé›†åˆæ¡†æ¶ç›¸å…³çš„æœ‰å“ªäº›æœ€å¥½çš„å®è·µï¼Ÿ
- æ ¹æ®éœ€è¦é€‰æ‹©æ­£ç¡®çš„é›†åˆç±»å‹.æ¯”å¦‚, å¦‚æœæŒ‡å®šäº†å¤§å°, æˆ‘ä»¬ä¼šé€‰ç”¨Arrayè€ŒéArrayList.å¦‚æœæˆ‘ä»¬æƒ³æ ¹æ®æ’å…¥é¡ºåºéå†ä¸€ä¸ªMap, æˆ‘ä»¬éœ€è¦ä½¿ç”¨TreeMap.å¦‚æœæˆ‘ä»¬ä¸æƒ³é‡å¤, æˆ‘ä»¬åº”è¯¥ä½¿ç”¨Set.
- ä¸€äº›é›†åˆç±»å…è®¸æŒ‡å®šåˆå§‹å®¹é‡, æ‰€ä»¥å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿä¼°è®¡åˆ°å­˜å‚¨å…ƒç´ çš„æ•°é‡, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒ, å°±é¿å…äº†é‡æ–°å“ˆå¸Œæˆ–å¤§å°è°ƒæ•´.
- åŸºäºæ¥å£ç¼–ç¨‹, è€ŒéåŸºäºå®ç°ç¼–ç¨‹, å®ƒå…è®¸æˆ‘ä»¬åæ¥è½»æ˜“åœ°æ”¹å˜å®ç°.
- æ€»æ˜¯ä½¿ç”¨ç±»å‹å®‰å…¨çš„æ³›å‹, é¿å…åœ¨è¿è¡Œæ—¶å‡ºç°ClassCastException.
- ä½¿ç”¨JDKæä¾›çš„ä¸å¯å˜ç±»ä½œä¸ºMapçš„key, å¯ä»¥é¿å…è‡ªå·±å®ç°hashCode()å’Œequals().
- å°½å¯èƒ½ä½¿ç”¨Collectionså·¥å…·ç±», æˆ–è€…è·å–åªè¯»ã€åŒæ­¥æˆ–ç©ºçš„é›†åˆ, è€Œéç¼–å†™è‡ªå·±çš„å®ç°.å®ƒå°†ä¼šæé«˜ä»£ç é‡ç”¨æ€§, å®ƒæœ‰ç€æ›´å¥½çš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§.

## HashMap è¿ç¯é—®é¢˜

### ä½ ç”¨è¿‡HashMapå—ï¼Ÿä»€ä¹ˆæ˜¯HashMapï¼Ÿä½ ä¸ºä»€ä¹ˆç”¨åˆ°å®ƒï¼Ÿ
HashMapå¯ä»¥æ¥å—nullé”®å€¼å’Œå€¼, è€ŒHashtableåˆ™ä¸èƒ½ï¼›
HashMapæ˜¯ésynchronized;HashMapå¾ˆå¿«ï¼›
ä»¥åŠHashMapå‚¨å­˜çš„æ˜¯é”®å€¼å¯¹ç­‰ç­‰.

### ä½ çŸ¥é“HashMapçš„å·¥ä½œåŸç†å—ï¼Ÿ ä½ çŸ¥é“HashMapçš„get()æ–¹æ³•çš„å·¥ä½œåŸç†å—ï¼Ÿ
HashMapæ˜¯åŸºäºhashingçš„åŸç†, æˆ‘ä»¬ä½¿ç”¨put(key, value)å­˜å‚¨å¯¹è±¡åˆ°HashMapä¸­, ä½¿ç”¨get(key)ä»HashMapä¸­è·å–å¯¹è±¡.
å½“æˆ‘ä»¬ç»™put()æ–¹æ³•ä¼ é€’é”®å’Œå€¼æ—¶, æˆ‘ä»¬å…ˆå¯¹é”®è°ƒç”¨hashCode()æ–¹æ³•, è¿”å›çš„hashCodeç”¨äºæ‰¾åˆ°bucketä½ç½®æ¥å‚¨å­˜Entryå¯¹è±¡.

### å½“ä¸¤ä¸ªå¯¹è±¡çš„hashcodeç›¸åŒä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ
hashcodeç›¸åŒ, æ‰€ä»¥å®ƒä»¬çš„bucketä½ç½®ç›¸åŒ, â€˜ç¢°æ’â€™ä¼šå‘ç”Ÿ.
å› ä¸ºHashMapä½¿ç”¨é“¾è¡¨å­˜å‚¨å¯¹è±¡, è¿™ä¸ªEntry(åŒ…å«æœ‰é”®å€¼å¯¹çš„Map.Entryå¯¹è±¡)ä¼šå­˜å‚¨åœ¨é“¾è¡¨ä¸­.

### å¦‚æœä¸¤ä¸ªé”®çš„hashcodeç›¸åŒ, ä½ å¦‚ä½•è·å–å€¼å¯¹è±¡ï¼Ÿ
å½“æˆ‘ä»¬è°ƒç”¨get()æ–¹æ³•, HashMapä¼šä½¿ç”¨é”®å¯¹è±¡çš„hashcodeæ‰¾åˆ°bucketä½ç½®, ç„¶åè·å–å€¼å¯¹è±¡.
é¢è¯•å®˜æé†’ä»–å¦‚æœæœ‰ä¸¤ä¸ªå€¼å¯¹è±¡å‚¨å­˜åœ¨åŒä¸€ä¸ªbucket, ä»–ç»™å‡ºç­”æ¡ˆ:
å°†ä¼šéå†é“¾è¡¨ç›´åˆ°æ‰¾åˆ°å€¼å¯¹è±¡.é¢è¯•å®˜ä¼šé—®å› ä¸ºä½ å¹¶æ²¡æœ‰å€¼å¯¹è±¡å»æ¯”è¾ƒ, ä½ æ˜¯å¦‚ä½•ç¡®å®šç¡®å®šæ‰¾åˆ°å€¼å¯¹è±¡çš„ï¼Ÿé™¤éé¢è¯•è€…ç›´åˆ°HashMapåœ¨é“¾è¡¨ä¸­å­˜å‚¨çš„æ˜¯é”®å€¼å¯¹, å¦åˆ™ä»–ä»¬ä¸å¯èƒ½å›ç­”å‡ºè¿™ä¸€é¢˜.

å…¶ä¸­ä¸€äº›è®°å¾—è¿™ä¸ªé‡è¦çŸ¥è¯†ç‚¹çš„é¢è¯•è€…ä¼šè¯´, æ‰¾åˆ°bucketä½ç½®ä¹‹å, ä¼šè°ƒç”¨keys.equals()æ–¹æ³•å»æ‰¾åˆ°é“¾è¡¨ä¸­æ­£ç¡®çš„èŠ‚ç‚¹, æœ€ç»ˆæ‰¾åˆ°è¦æ‰¾çš„å€¼å¯¹è±¡.å®Œç¾çš„ç­”æ¡ˆï¼

è®¸å¤šæƒ…å†µä¸‹, é¢è¯•è€…ä¼šåœ¨è¿™ä¸ªç¯èŠ‚ä¸­å‡ºé”™, å› ä¸ºä»–ä»¬æ··æ·†äº†hashCode()å’Œequals()æ–¹æ³•.å› ä¸ºåœ¨æ­¤ä¹‹å‰hashCode()å±¡å±¡å‡ºç°, è€Œequals()æ–¹æ³•ä»…ä»…åœ¨è·å–å€¼å¯¹è±¡çš„æ—¶å€™æ‰å‡ºç°.ä¸€äº›ä¼˜ç§€çš„å¼€å‘è€…ä¼šæŒ‡å‡ºä½¿ç”¨ä¸å¯å˜çš„ã€å£°æ˜ä½œfinalçš„å¯¹è±¡, å¹¶ä¸”é‡‡ç”¨åˆé€‚çš„equals()å’ŒhashCode()æ–¹æ³•çš„è¯, å°†ä¼šå‡å°‘ç¢°æ’çš„å‘ç”Ÿ, æé«˜æ•ˆç‡.ä¸å¯å˜æ€§ä½¿å¾—èƒ½å¤Ÿç¼“å­˜ä¸åŒé”®çš„hashcode, è¿™å°†æé«˜æ•´ä¸ªè·å–å¯¹è±¡çš„é€Ÿåº¦, ä½¿ç”¨String, Intergerè¿™æ ·çš„wrapperç±»ä½œä¸ºé”®æ˜¯éå¸¸å¥½çš„é€‰æ‹©.

### å¦‚æœHashMapçš„å¤§å°è¶…è¿‡äº†è´Ÿè½½å› å­(load factor)å®šä¹‰çš„å®¹é‡, æ€ä¹ˆåŠï¼Ÿ
é»˜è®¤çš„è´Ÿè½½å› å­å¤§å°ä¸º0.75, ä¹Ÿå°±æ˜¯è¯´, å½“ä¸€ä¸ªmapå¡«æ»¡äº†75%çš„bucketæ—¶å€™, å’Œå…¶å®ƒé›†åˆç±»(å¦‚ArrayListç­‰)ä¸€æ ·, å°†ä¼šåˆ›å»ºåŸæ¥HashMapå¤§å°çš„ä¸¤å€çš„bucketæ•°ç»„, æ¥é‡æ–°è°ƒæ•´mapçš„å¤§å°, å¹¶å°†åŸæ¥çš„å¯¹è±¡æ”¾å…¥æ–°çš„bucketæ•°ç»„ä¸­.è¿™ä¸ªè¿‡ç¨‹å«ä½œrehashing, å› ä¸ºå®ƒè°ƒç”¨hashæ–¹æ³•æ‰¾åˆ°æ–°çš„bucketä½ç½®.

### ä½ äº†è§£é‡æ–°è°ƒæ•´HashMapå¤§å°å­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ
å¯èƒ½äº§ç”Ÿæ¡ä»¶ç«äº‰(race condition).
å½“é‡æ–°è°ƒæ•´HashMapå¤§å°çš„æ—¶å€™, ç¡®å®å­˜åœ¨æ¡ä»¶ç«äº‰, å› ä¸ºå¦‚æœä¸¤ä¸ªçº¿ç¨‹éƒ½å‘ç°HashMapéœ€è¦é‡æ–°è°ƒæ•´å¤§å°äº†, å®ƒä»¬ä¼šåŒæ—¶è¯•ç€è°ƒæ•´å¤§å°.åœ¨è°ƒæ•´å¤§å°çš„è¿‡ç¨‹ä¸­, å­˜å‚¨åœ¨é“¾è¡¨ä¸­çš„å…ƒç´ çš„æ¬¡åºä¼šåè¿‡æ¥, å› ä¸ºç§»åŠ¨åˆ°æ–°çš„bucketä½ç½®çš„æ—¶å€™, HashMapå¹¶ä¸ä¼šå°†å…ƒç´ æ”¾åœ¨é“¾è¡¨çš„å°¾éƒ¨, è€Œæ˜¯æ”¾åœ¨å¤´éƒ¨, è¿™æ˜¯ä¸ºäº†é¿å…å°¾éƒ¨éå†(tail traversing).å¦‚æœæ¡ä»¶ç«äº‰å‘ç”Ÿäº†, é‚£ä¹ˆå°±æ­»å¾ªç¯äº†.è¿™ä¸ªæ—¶å€™, ä½ å¯ä»¥è´¨é—®é¢è¯•å®˜, ä¸ºä»€ä¹ˆè¿™ä¹ˆå¥‡æ€ª, è¦åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ä½¿ç”¨HashMapå‘¢


### ä¸ºä»€ä¹ˆString, Intergerè¿™æ ·çš„wrapperç±»é€‚åˆä½œä¸ºé”®ï¼Ÿ 
String, Intergerè¿™æ ·çš„wrapperç±»ä½œä¸ºHashMapçš„é”®æ˜¯å†é€‚åˆä¸è¿‡äº†, è€Œä¸”Stringæœ€ä¸ºå¸¸ç”¨.å› ä¸ºStringæ˜¯ä¸å¯å˜çš„, ä¹Ÿæ˜¯finalçš„, è€Œä¸”å·²ç»é‡å†™äº†equals()å’ŒhashCode()æ–¹æ³•äº†.å…¶ä»–çš„wrapperç±»ä¹Ÿæœ‰è¿™ä¸ªç‰¹ç‚¹.ä¸å¯å˜æ€§æ˜¯å¿…è¦çš„, å› ä¸ºä¸ºäº†è¦è®¡ç®—hashCode(), å°±è¦é˜²æ­¢é”®å€¼æ”¹å˜, å¦‚æœé”®å€¼åœ¨æ”¾å…¥æ—¶å’Œè·å–æ—¶è¿”å›ä¸åŒçš„hashcodeçš„è¯, é‚£ä¹ˆå°±ä¸èƒ½ä»HashMapä¸­æ‰¾åˆ°ä½ æƒ³è¦çš„å¯¹è±¡.ä¸å¯å˜æ€§è¿˜æœ‰å…¶ä»–çš„ä¼˜ç‚¹å¦‚çº¿ç¨‹å®‰å…¨.å¦‚æœä½ å¯ä»¥ä»…ä»…é€šè¿‡å°†æŸä¸ªfieldå£°æ˜æˆfinalå°±èƒ½ä¿è¯hashCodeæ˜¯ä¸å˜çš„, é‚£ä¹ˆè¯·è¿™ä¹ˆåšå§.å› ä¸ºè·å–å¯¹è±¡çš„æ—¶å€™è¦ç”¨åˆ°equals()å’ŒhashCode()æ–¹æ³•, é‚£ä¹ˆé”®å¯¹è±¡æ­£ç¡®çš„é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯éå¸¸é‡è¦çš„.å¦‚æœä¸¤ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡è¿”å›ä¸åŒçš„hashcodeçš„è¯, é‚£ä¹ˆç¢°æ’çš„å‡ ç‡å°±ä¼šå°äº›, è¿™æ ·å°±èƒ½æé«˜HashMapçš„æ€§èƒ½.

### æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„å¯¹è±¡ä½œä¸ºé”®å—ï¼Ÿ 
è¿™æ˜¯å‰ä¸€ä¸ªé—®é¢˜çš„å»¶ä¼¸.å½“ç„¶ä½ å¯èƒ½ä½¿ç”¨ä»»ä½•å¯¹è±¡ä½œä¸ºé”®, åªè¦å®ƒéµå®ˆäº†equals()å’ŒhashCode()æ–¹æ³•çš„å®šä¹‰è§„åˆ™, å¹¶ä¸”å½“å¯¹è±¡æ’å…¥åˆ°Mapä¸­ä¹‹åå°†ä¸ä¼šå†æ”¹å˜äº†.å¦‚æœè¿™ä¸ªè‡ªå®šä¹‰å¯¹è±¡æ—¶ä¸å¯å˜çš„, é‚£ä¹ˆå®ƒå·²ç»æ»¡è¶³äº†ä½œä¸ºé”®çš„æ¡ä»¶, å› ä¸ºå½“å®ƒåˆ›å»ºä¹‹åå°±å·²ç»ä¸èƒ½æ”¹å˜äº†.

### æˆ‘ä»¬å¯ä»¥ä½¿ç”¨CocurrentHashMapæ¥ä»£æ›¿Hashtableå—ï¼Ÿ
è¿™æ˜¯å¦å¤–ä¸€ä¸ªå¾ˆçƒ­é—¨çš„é¢è¯•é¢˜, å› ä¸ºConcurrentHashMapè¶Šæ¥è¶Šå¤šäººç”¨äº†.æˆ‘ä»¬çŸ¥é“Hashtableæ˜¯synchronizedçš„, ä½†æ˜¯ConcurrentHashMapåŒæ­¥æ€§èƒ½æ›´å¥½, å› ä¸ºå®ƒä»…ä»…æ ¹æ®åŒæ­¥çº§åˆ«å¯¹mapçš„ä¸€éƒ¨åˆ†è¿›è¡Œä¸Šé”.

ç­”æ¡ˆæ˜¯ä¸èƒ½ï¼ŒHashTable çš„è¿­ä»£å™¨æ˜¯å¼ºä¸€è‡´æ€§çš„ï¼Œè€Œ ConcurrentHashMap æ˜¯å¼±ä¸€è‡´æ€§çš„. ConcurrentHashMap çš„ getã€clearã€iterator éƒ½æ˜¯å¼±ä¸€è‡´æ€§çš„

ConcurrentHashMap çš„å¼±ä¸€è‡´æ€§ä¸»è¦æ˜¯ä¸ºäº†æå‡æ•ˆç‡ï¼Œæ˜¯ä¸€è‡´æ€§ä¸æ•ˆç‡ä¹‹é—´çš„ä¸€ç§æƒè¡¡. è¦æˆä¸ºå¼ºä¸€è‡´æ€§ï¼Œå°±å¾—åˆ°å¤„ä½¿ç”¨é”ï¼Œç”šè‡³æ˜¯å…¨å±€é”

HashTable è™½ç„¶æ€§èƒ½ä¸Šä¸å¦‚ ConcurrentHashMapï¼Œä½†å¹¶ä¸èƒ½å®Œå…¨è¢«å–ä»£ï¼Œä¸¤è€…çš„è¿­ä»£å™¨çš„ä¸€è‡´æ€§ä¸åŒçš„ï¼ŒHashTable çš„è¿­ä»£å™¨æ˜¯å¼ºä¸€è‡´æ€§çš„ï¼Œè€Œ ConcurrentHashMap æ˜¯å¼±ä¸€è‡´çš„.  ConcurrentHashMap çš„ getï¼Œclearï¼Œiterator éƒ½æ˜¯å¼±ä¸€è‡´æ€§çš„.  Doug Lea ä¹Ÿå°†è¿™ä¸ªåˆ¤æ–­ç•™ç»™ç”¨æˆ·è‡ªå·±å†³å®šæ˜¯å¦ä½¿ç”¨ ConcurrentHashMap. 

é‚£ä¹ˆä»€ä¹ˆæ˜¯å¼ºä¸€è‡´æ€§å’Œå¼±ä¸€è‡´æ€§å‘¢ï¼Ÿ

get æ–¹æ³•æ˜¯å¼±ä¸€è‡´çš„ï¼Œæ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿå¯èƒ½ä½ æœŸæœ›å¾€ ConcurrentHashMap åº•å±‚æ•°æ®ç»“æ„ä¸­åŠ å…¥ä¸€ä¸ªå…ƒç´ åï¼Œç«‹é©¬èƒ½å¯¹ get å¯è§ï¼Œä½† ConcurrentHashMap å¹¶ä¸èƒ½å¦‚ä½ æ‰€æ„¿. æ¢å¥è¯è¯´ï¼Œput æ“ä½œå°†ä¸€ä¸ªå…ƒç´ åŠ å…¥åˆ°åº•å±‚æ•°æ®ç»“æ„åï¼Œget å¯èƒ½åœ¨æŸæ®µæ—¶é—´å†…è¿˜çœ‹ä¸åˆ°è¿™ä¸ªå…ƒç´ ï¼Œè‹¥ä¸è€ƒè™‘å†…å­˜æ¨¡å‹ï¼Œå•ä»ä»£ç é€»è¾‘ä¸Šæ¥çœ‹ï¼Œå´æ˜¯åº”è¯¥å¯ä»¥çœ‹å¾—åˆ°çš„.

* hashingçš„æ¦‚å¿µ
* HashMapä¸­è§£å†³ç¢°æ’çš„æ–¹æ³•
* equals()å’ŒhashCode()çš„åº”ç”¨, ä»¥åŠå®ƒä»¬åœ¨HashMapä¸­çš„é‡è¦æ€§
* ä¸å¯å˜å¯¹è±¡çš„å¥½å¤„
* HashMapå¤šçº¿ç¨‹çš„æ¡ä»¶ç«äº‰
* é‡æ–°è°ƒæ•´HashMapçš„å¤§å°

æ€»ç»“
HashMapçš„å·¥ä½œåŸç†
HashMapåŸºäºhashingåŸç†, æˆ‘ä»¬é€šè¿‡put()å’Œget()æ–¹æ³•å‚¨å­˜å’Œè·å–å¯¹è±¡.å½“æˆ‘ä»¬å°†é”®å€¼å¯¹ä¼ é€’ç»™put()æ–¹æ³•æ—¶, å®ƒè°ƒç”¨é”®å¯¹è±¡çš„hashCode()æ–¹æ³•æ¥è®¡ç®—hashcode, è®©åæ‰¾åˆ°bucketä½ç½®æ¥å‚¨å­˜å€¼å¯¹è±¡.å½“è·å–å¯¹è±¡æ—¶, é€šè¿‡é”®å¯¹è±¡çš„equals()æ–¹æ³•æ‰¾åˆ°æ­£ç¡®çš„é”®å€¼å¯¹, ç„¶åè¿”å›å€¼å¯¹è±¡.HashMapä½¿ç”¨é“¾è¡¨æ¥è§£å†³ç¢°æ’é—®é¢˜, å½“å‘ç”Ÿç¢°æ’äº†, å¯¹è±¡å°†ä¼šå‚¨å­˜åœ¨é“¾è¡¨çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸­. HashMapåœ¨æ¯ä¸ªé“¾è¡¨èŠ‚ç‚¹ä¸­å‚¨å­˜é”®å€¼å¯¹å¯¹è±¡.
å½“ä¸¤ä¸ªä¸åŒçš„é”®å¯¹è±¡çš„hashcodeç›¸åŒæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ å®ƒä»¬ä¼šå‚¨å­˜åœ¨åŒä¸€ä¸ªbucketä½ç½®çš„é“¾è¡¨ä¸­.é”®å¯¹è±¡çš„equals()æ–¹æ³•ç”¨æ¥æ‰¾åˆ°é”®å€¼å¯¹.



### é—®é¢˜ä¸€ï¼šåœ¨æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨è¿‡çš„ java é›†åˆç±»æœ‰å“ªäº›ï¼Ÿ

ä¸€èˆ¬åº”è˜è€…éƒ½ä¼šå›ç­” ArrayListï¼ŒLinkedListï¼ŒHashMapï¼ŒHashSet ç­‰ç­‰. å¦‚æœè¿è¿™å‡ ä¸ªé›†åˆç±»éƒ½ä¸çŸ¥é“ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥ pass äº†. 

### é—®é¢˜äºŒï¼šèƒ½æè¿°ä¸€ä¸‹ HashMap çš„å®ç°åŸç†å—ï¼Ÿ

å…¶å® HashMap æ˜¯å…¸å‹çš„ç©ºé—´æ¢æ—¶é—´çš„ä¸€ç§æŠ€æœ¯æ‰‹æ®µ. å¦‚æœé¢è¯•è€…åœ¨è¿™ä¸ªé—®é¢˜ä¸­ä¸èƒ½å¾ˆå¥½çš„é˜è¿° HashMap çš„å®ç°åŸç†ï¼Œæ¯”å¦‚ä¸çŸ¥é“å¦‚ä½•è§£å†³ hash å†²çªï¼Œä¸çŸ¥é“ loadFactor è¿™æ ·çš„æ ¸å¿ƒæ¦‚å¿µä»¥åŠæ‰©å®¹æœºåˆ¶. åŸºæœ¬ä¸Šæˆ‘ä¸ä¼šåšæ·±å…¥è€ƒå¯Ÿäº†ï¼Œå¯ä»¥ pass äº†. 

### é—®é¢˜ä¸‰ï¼šå¹³æ—¶åœ¨ä½¿ç”¨ HashMap æ—¶ä¸€èˆ¬ä½¿ç”¨ä»€ä¹ˆç±»å‹çš„å…ƒç´ ä½œä¸º Keyï¼Ÿ

é¢è¯•è€…é€šå¸¸ä¼šå›ç­”ï¼Œä½¿ç”¨ String æˆ–è€… Integer è¿™æ ·çš„ç±». è¿™ä¸ªæ—¶å€™å¯ä»¥ç»§ç»­è¿½é—®ä¸ºä»€ä¹ˆä½¿ç”¨ Stringã€Integer å‘¢ï¼Ÿè¿™äº›ç±»æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿå¦‚æœé¢è¯•è€…æœ‰å¾ˆå¥½çš„æ€è€ƒï¼Œå¯ä»¥å›ç­”å‡ºè¿™äº›ç±»æ˜¯ Immutable çš„ï¼Œå¹¶ä¸”è¿™äº›ç±»å·²ç»å¾ˆè§„èŒƒçš„è¦†å†™äº† hashCode () ä»¥åŠ equals () æ–¹æ³•. ä½œä¸ºä¸å¯å˜ç±»å¤©ç”Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œä¸”å¯ä»¥å¾ˆå¥½çš„ä¼˜åŒ–æ¯”å¦‚å¯ä»¥ç¼“å­˜ hash å€¼ï¼Œé¿å…é‡å¤è®¡ç®—ç­‰ç­‰ï¼Œé‚£ä¹ˆåŸºæœ¬ä¸Šè¿™é“é¢˜ç®—æ˜¯è¿‡å…³äº†. 

### é—®é¢˜å››ï¼šå¦‚æœè®©ä½ å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„ class ä½œä¸º HashMap çš„ key è¯¥å¦‚ä½•å®ç°ï¼Ÿ

è¿™ä¸ªé—®é¢˜å…¶å®éšè—ç€å‡ ä¸ªçŸ¥è¯†ç‚¹ï¼Œè¦†å†™ hashCode ä»¥åŠ equals æ–¹æ³•åº”è¯¥éµå¾ªçš„åŸåˆ™ï¼Œåœ¨ jdk æ–‡æ¡£ä»¥åŠã€Šeffective javaã€‹ä¸­éƒ½æœ‰æ˜ç¡®çš„æè¿°. å½“ç„¶è¿™ä¹Ÿåœ¨è€ƒå¯Ÿåº”è˜è€…æ˜¯å¦‚ä½•è‡ªå®ç°ä¸€ä¸ª Immutable ç±». å¦‚æœé¢è¯•è€…è¿™ä¸ªé—®é¢˜ä¹Ÿèƒ½å›ç­”çš„å¾ˆå¥½ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥è·å¾—ä¸€ç‚¹é¢è¯•å®˜çš„å¥½æ„Ÿäº†. 

### é—®é¢˜å››å»¶ä¼¸ï¼šä½ èƒ½è®¾è®¡ä¸€ä¸ªç®—æ³•ï¼ˆè¾“å…¥æ˜¯ java æºæ–‡ä»¶ï¼‰ï¼Œåˆ¤æ–­ä¸€ä¸ªç±»æ˜¯å¦æ˜¯ Immutable çš„å—ï¼Ÿ

è¿™é“é¢˜è€ƒå¯Ÿé¢éå¸¸éå¸¸å¹¿. å¦‚æœè¿™ä¸ªé—®é¢˜é¢è¯•è€…å›ç­”ä¸Šäº†ï¼Œæˆ‘è§‰å¾—é¢è¯•è€…çš„åŸºç¡€çŸ¥è¯†æ— éœ€è€ƒå¯Ÿäº†. å¯ä»¥ç»§ç»­è€ƒå¯Ÿé«˜å¹¶å‘ä¸åˆ†å¸ƒå¼æ¶æ„è®¾è®¡äº†. 

### é—®é¢˜äº”ï¼šå¦‚ä½•è¡¡é‡ä¸€ä¸ª hash ç®—æ³•çš„å¥½åï¼Œä½ çŸ¥é“çš„å¸¸ç”¨ hash ç®—æ³•æœ‰å“ªäº›ï¼Ÿ

å¦‚æœé¢è¯•è€…çš„æŠ€æœ¯é¢æ¯”è¾ƒå®½ï¼Œæˆ–è€…ç®—æ³•åŸºç¡€ä»¥åŠæ•°è®ºåŸºç¡€æ¯”è¾ƒå¥½ï¼Œè¿™ä¸ªé—®é¢˜æ‰å¯ä»¥åšå¾ˆå¥½çš„å›ç­”. é¦–å…ˆï¼ŒhashCode () ä¸è¦æ±‚å”¯ä¸€ä½†æ˜¯è¦å°½å¯èƒ½çš„å‡åŒ€åˆ†å¸ƒï¼Œè€Œä¸”ç®—æ³•æ•ˆç‡è¦å°½å¯èƒ½çš„å¿«. å¦‚æœé¢è¯•è€…èƒ½å›ç­”å‡ºä¸€äº›å¸¸ç”¨çš„ç®—æ³•ï¼Œæ¯”å¦‚ MurMurHashï¼ˆèŒèŒå“’çš„åå­—ï¼‰åŸºæœ¬ä¸Šå·²ç»å¯ä»¥ä¿˜è·é¢è¯•å®˜äº†. å¦‚æœé¢è¯•è€…æœ‰ç¼–è¯‘å™¨çš„èƒŒæ™¯è¯´å‡ºäº†å¦‚ä½•åœ¨ç¼–è¯‘é¢†åŸŸä½¿ç”¨å®Œç¾å“ˆå¸Œçš„åœºæ™¯ï¼Œé‚£å°±å¤ªæ£’äº†ï¼Œæ¯•ç«Ÿç¼–è¯‘åŸç†å­¦çš„å¥½çš„äººå¤ªå°‘äº†. å½“ç„¶ä¸è¦å¿˜è®°äº†ï¼Œè¿˜å¯ä»¥å†è€ƒå¯Ÿä¸€ä¸‹ java ä¸­ String ç±»çš„ hashCode () çš„å®ç°ï¼š

```
public int hashCode() {
    int h = hash;
    if (h == 0 && count > 0) {
       int off = offset;
        char val[] = value;
        int len = count;
        for (int i = 0; i < len; i++) {
            h = 31*h + val[off++];
       }
        hash = h;
   }
   return h;
}
```

ä¸ºä»€ä¹ˆ `h = 31 * h + val[off++];` è¿™ä¸€è¡Œä½¿ç”¨ `31` ï¼Œè€Œä¸æ˜¯åˆ«çš„æ•°å­—ï¼Œè¿™æ˜¯ä¸€ä¸ªé­”æœ¯å—ï¼Ÿ
 å¦‚æœéƒ½ç»“æŸäº†ï¼Œä¸è¦å¿˜äº†å†é—®ä¸€å¥ä½ çŸ¥é“ hash æ”»å‡»å—ï¼Ÿæœ‰é¿å…æ‰‹æ®µå—ï¼Ÿå°±çœ‹é¢è¯•è€…å¯¹å„ä¸ª jdk ç‰ˆæœ¬å¯¹ HashMap çš„ä¼˜åŒ–æ˜¯å¦äº†è§£äº†. è¿™å°±å¼•å‡ºäº†å¦ä¸€ä¸ªæ•°æ®ç»“æ„çº¢é»‘æ ‘äº†. å¯ä»¥æ ¹æ®å²—ä½éœ€è¦ç»§ç»­è€ƒå¯Ÿ rb-treeï¼Œb-treeï¼Œlsm-tree ç­‰å¸¸ç”¨æ•°æ®ç»“æ„ä»¥åŠå…¸å‹åº”ç”¨åœºæ™¯. 

### é—®é¢˜å…­ï¼š HashMap æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ å¦‚æœå¤šä¸ªçº¿ç¨‹æ“ä½œåŒä¸€ä¸ª HashMap å¯¹è±¡ä¼šäº§ç”Ÿå“ªäº›éæ­£å¸¸ç°è±¡ï¼Ÿ

å…¶å®è¿™å·²ç»å¼€å§‹è€ƒå¯Ÿé¢è¯•è€…å¯¹å¹¶å‘çŸ¥è¯†çš„æŒæ¡æƒ…å†µäº†. HashMap åœ¨ resize æ—¶å€™å¦‚æœå¤šä¸ªçº¿ç¨‹å¹¶å‘æ“ä½œå¦‚ä½•å¯¼è‡´æ­»é”çš„. é¢è¯•è€…ä¸ä¸€å®šçŸ¥é“ï¼Œä½†æ˜¯å¯ä»¥è®©é¢è¯•è€…åˆ†æ. æ¯•ç«Ÿå¾ˆå¤šç±»åº“åœ¨å¹¶å‘åœºæ™¯ä¸­ä¸æ°å½“ä½¿ç”¨ HashMap å¯¼è‡´è¿‡ç”Ÿäº§é—®é¢˜. 

### é—®é¢˜ä¸ƒï¼š ConcurrentHashMap vs HashTable ä»–ä»¬æ˜¯å¦‚ä½•å¤„ç†å¹¶å‘çš„ï¼Ÿä¸ºä»€ä¹ˆæœ‰äº† ConcurrentHashMap æ²¡æœ‰æŠŠ HashTable ç”¨ @Deprecated æ³¨è§£åºŸå¼ƒæ‰ï¼Ÿ

è¿™ä¸ªæ—¶å€™é—®é¢˜å·²ç»å‡çº§äº†ï¼Œå¸Œæœ›é¢è¯•è€…åˆ†æè¿‡è¿™ä¸¤ä¸ªç±»çš„æºä»£ç . æˆ‘ä»¬æ˜¯å¸Œæœ›é¢è¯•è€…èƒ½å¤ŸçŸ¥é“ ConcurrentHashMap çš„å†…éƒ¨å®ç°åŸç†ï¼Œè€Œä¸”å‡ ä¹æ˜¯ä¸ªç¡¬æ€§è¦æ±‚äº†. åä¸€ä¸ªé—®é¢˜ä¼¼ä¹æ›´éš¾ä¸€äº›ï¼Œä¸»è¦æ˜¯è¿›ä¸€æ­¥è€ƒå¯Ÿé¢è¯•è€…å¯¹ç»†èŠ‚çš„ä¸€äº›æ€è€ƒ. 

### é—®é¢˜å…«ï¼šå‡å¦‚åœ¨ä¸€ä¸ªæ²¡æœ‰ GC çš„è¯­è¨€ï¼ˆæ¯”å¦‚ c è¯­è¨€ï¼‰ä¸­å®ç°ä¸€ä¸ª HashMapï¼Œå¦‚ä½•å¤„ç†è¡¨æ‰©å®¹ä»¥åŠæ”¶ç¼©é—®é¢˜ï¼Ÿ

ç°åœ¨å¾ˆå¤šå†…å­˜æ•°æ®åº“ï¼Œæ¯”å¦‚ redis å†…éƒ¨ä½¿ç”¨çš„è¿˜æ˜¯ HashMap è¿™ç§æ•°æ®ç»“æ„ï¼Œä½†æ˜¯åœ¨æ•°æ®é‡ç‰¹åˆ«å¤§çš„æ—¶å€™æ¯”å¦‚ 100W çš„è®°å½•æ•°ï¼Œåœ¨é‡åˆ°æ‰©å®¹çš„æ—¶å€™å¦‚æœæš´åŠ›çš„æ‰©å®¹ 2 å€ï¼Œç„¶ååš rehashï¼Œè‚¯å®šæ˜¯æœ‰é—®é¢˜çš„. é‚£ä¹ˆå¦‚ä½•é¿å…å‘¢ï¼Ÿå½“ç¼“å­˜çš„æ•°æ®ä¸æ–­çš„è¢«åˆ é™¤æˆ–è€…åˆ°æœŸå¤±æ•ˆï¼Œå¦‚ä½•æœ‰æ•ˆçš„ç®¡ç†å†…å­˜ç©ºé—´å‘¢ï¼Ÿè¿™äº›éƒ½æ˜¯å€¼å¾—é¢è¯•è€…æ€è€ƒçš„é—®é¢˜. 



### java.util.Arrays
Arrayæ˜¯Javaç‰¹æœ‰çš„æ•°ç»„,è€Œ Arraysæ˜¯å¤„ç†æ•°æ®çš„å·¥å…·ç±»

- Arrays.asList:å¯ä»¥ä» Array è½¬æ¢æˆ List.å¯ä»¥ä½œä¸ºå…¶ä»–é›†åˆç±»å‹æ„é€ å™¨çš„å‚æ•°.
- Arrays.binarySearch:åœ¨ä¸€ä¸ªå·²æ’åºçš„æˆ–è€…å…¶ä¸­ä¸€æ®µä¸­å¿«é€ŸæŸ¥æ‰¾.
- Arrays.copyOf:å¦‚æœä½ æƒ³æ‰©å¤§æ•°ç»„å®¹é‡åˆä¸æƒ³æ”¹å˜å®ƒçš„å†…å®¹çš„æ—¶å€™å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•.
- Arrays.copyOfRange:å¯ä»¥å¤åˆ¶æ•´ä¸ªæ•°ç»„æˆ–å…¶ä¸­çš„ä¸€éƒ¨åˆ†.
- Arrays.deepEqualsã€Arrays.deepHashCode:Arrays.equals/hashCodeçš„é«˜çº§ç‰ˆæœ¬, æ”¯æŒå­æ•°ç»„çš„æ“ä½œ.
- Arrays.equals:å¦‚æœä½ æƒ³è¦æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸ç­‰, åº”è¯¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•è€Œä¸æ˜¯æ•°ç»„å¯¹è±¡ä¸­çš„ equalsæ–¹æ³•ï¼ˆæ•°ç»„å¯¹è±¡ä¸­æ²¡æœ‰é‡å†™equals()æ–¹æ³•, æ‰€ä»¥è¿™ä¸ªæ–¹æ³•ä¹‹æ¯”è¾ƒå¼•ç”¨è€Œä¸æ¯”è¾ƒå†…å®¹ï¼‰.è¿™ä¸ªæ–¹æ³•é›†åˆäº†Java 5çš„è‡ªåŠ¨è£…ç®±å’Œæ— å‚å˜é‡çš„ç‰¹æ€§, æ¥å®ç°å°†ä¸€ä¸ªå˜é‡å¿«é€Ÿåœ°ä¼ ç»™ equals() æ–¹æ³•â€”â€”æ‰€ä»¥è¿™ä¸ªæ–¹æ³•åœ¨æ¯”è¾ƒäº†å¯¹è±¡çš„ç±»å‹ä¹‹åæ˜¯ç›´æ¥ä¼ å€¼è¿›å»æ¯”è¾ƒçš„.
- Arrays.fill:ç”¨ä¸€ä¸ªç»™å®šçš„å€¼å¡«å……æ•´ä¸ªæ•°ç»„æˆ–å…¶ä¸­çš„ä¸€éƒ¨åˆ†.
- Arrays.hashCode:ç”¨æ¥æ ¹æ®æ•°ç»„çš„å†…å®¹è®¡ç®—å…¶å“ˆå¸Œå€¼ï¼ˆæ•°ç»„å¯¹è±¡çš„hashCode()ä¸å¯ç”¨ï¼‰.è¿™ä¸ªæ–¹æ³•é›†åˆäº†Java 5çš„è‡ªåŠ¨è£…ç®±å’Œæ— å‚å˜é‡çš„ç‰¹æ€§, æ¥å®ç°å°†ä¸€ä¸ªå˜é‡å¿«é€Ÿåœ°ä¼ ç»™ Arrays.hashcodeæ–¹æ³•â€”â€”åªæ˜¯ä¼ å€¼è¿›å», ä¸æ˜¯å¯¹è±¡.
- Arrays.sort:å¯¹æ•´ä¸ªæ•°ç»„æˆ–è€…æ•°ç»„çš„ä¸€éƒ¨åˆ†è¿›è¡Œæ’åº.ä¹Ÿå¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•ç”¨ç»™å®šçš„æ¯”è¾ƒå™¨å¯¹å¯¹è±¡æ•°ç»„è¿›è¡Œæ’åº.
- Arrays.toString:æ‰“å°æ•°ç»„çš„å†…å®¹.

å¦‚æœæƒ³è¦å¤åˆ¶æ•´ä¸ªæ•°ç»„æˆ–å…¶ä¸­ä¸€éƒ¨åˆ†åˆ°å¦ä¸€ä¸ªæ•°ç»„, å¯ä»¥è°ƒç”¨ System.arraycopyæ–¹æ³•.æ­¤æ–¹æ³•ä»æºæ•°ç»„ä¸­æŒ‡å®šçš„ä½ç½®å¤åˆ¶æŒ‡å®šä¸ªæ•°çš„å…ƒç´ åˆ°ç›®æ ‡æ•°ç»„é‡Œ.è¿™æ— ç–‘æ˜¯ä¸€ä¸ªç®€ä¾¿çš„æ–¹æ³•.ï¼ˆæœ‰æ—¶å€™ç”¨ ByteBuffer bulkå¤åˆ¶ä¼šæ›´å¿«.

### java.util.Collections

### fail-fast é—®é¢˜
>fail-fast æœºåˆ¶æ˜¯javaé›†åˆ(Collection)ä¸­çš„ä¸€ç§é”™è¯¯æœºåˆ¶.å½“å¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªé›†åˆçš„å†…å®¹è¿›è¡Œæ“ä½œæ—¶, å°±å¯èƒ½ä¼šäº§ç”Ÿfail-fastäº‹ä»¶.
ä¾‹å¦‚:å½“æŸä¸€ä¸ªçº¿ç¨‹Aé€šè¿‡iteratorå»éå†æŸé›†åˆçš„è¿‡ç¨‹ä¸­, è‹¥è¯¥é›†åˆçš„å†…å®¹è¢«å…¶ä»–çº¿ç¨‹æ‰€æ”¹å˜äº†ï¼›é‚£ä¹ˆçº¿ç¨‹Aè®¿é—®é›†åˆæ—¶, å°±ä¼šæŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸, äº§ç”Ÿfail-fastäº‹ä»¶.

#### å‘ç”ŸåŸå› 
åœ¨è°ƒç”¨ next() å’Œ remove()æ—¶, éƒ½ä¼šæ‰§è¡Œ checkForComodification().è‹¥ â€œmodCount ä¸ç­‰äº expectedModCountâ€, åˆ™æŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸, äº§ç”Ÿfail-fastäº‹ä»¶.

#### è§£å†³æ–¹æ³•
åªéœ€è¦å°†ArrayListæ›¿æ¢æˆjava.util.concurrentåŒ…ä¸‹å¯¹åº”çš„ç±»å³å¯.
å³, å°†ä»£ç 
`private static List<String> list = new ArrayList<String>();`
æ›¿æ¢ä¸º
`private static List<String> list = new CopyOnWriteArrayList<String>();`

#### è§£å†³åŸç†
- å’ŒArrayListç»§æ‰¿äºAbstractListä¸åŒ, CopyOnWriteArrayListæ²¡æœ‰ç»§æ‰¿äºAbstractList, å®ƒä»…ä»…åªæ˜¯å®ç°äº†Listæ¥å£.
- ArrayListçš„iterator()å‡½æ•°è¿”å›çš„Iteratoræ˜¯åœ¨AbstractListä¸­å®ç°çš„ï¼›è€ŒCopyOnWriteArrayListæ˜¯è‡ªå·±å®ç°Iterator.
- ArrayListçš„Iteratorå®ç°ç±»ä¸­è°ƒç”¨next()æ—¶, ä¼šâ€œè°ƒç”¨checkForComodification()æ¯”è¾ƒâ€˜expectedModCountâ€™å’Œâ€˜modCountâ€™çš„å¤§å°â€ï¼›ä½†æ˜¯, CopyOnWriteArrayListçš„Iteratorå®ç°ç±»ä¸­, æ²¡æœ‰æ‰€è°“çš„checkForComodification(), æ›´ä¸ä¼šæŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ï¼ 

> **1.Javaé›†åˆæ¡†æ¶æ˜¯ä»€ä¹ˆï¼Ÿè¯´å‡ºä¸€äº›é›†åˆæ¡†æ¶çš„ä¼˜ç‚¹ï¼Ÿ**

æ¯ç§ç¼–ç¨‹è¯­è¨€ä¸­éƒ½æœ‰é›†åˆï¼Œæœ€åˆçš„Javaç‰ˆæœ¬åŒ…å«å‡ ç§é›†åˆç±»ï¼šVectorã€Stackã€HashTableå’ŒArray. 

éšç€é›†åˆçš„å¹¿æ³›ä½¿ç”¨ï¼ŒJava1.2æå‡ºäº†å›Šæ‹¬æ‰€æœ‰é›†åˆæ¥å£ã€å®ç°å’Œç®—æ³•çš„é›†åˆæ¡†æ¶. åœ¨ä¿è¯çº¿ç¨‹å®‰å…¨çš„æƒ…å†µä¸‹ä½¿ç”¨æ³›å‹å’Œå¹¶å‘é›†åˆç±»ï¼ŒJavaå·²ç»ç»å†äº†å¾ˆä¹…. å®ƒè¿˜åŒ…æ‹¬åœ¨Javaå¹¶å‘åŒ…ä¸­ï¼Œé˜»å¡æ¥å£ä»¥åŠå®ƒä»¬çš„å®ç°. 

é›†åˆæ¡†æ¶çš„éƒ¨åˆ†ä¼˜ç‚¹å¦‚ä¸‹ï¼š

ï¼ˆ1ï¼‰ä½¿ç”¨æ ¸å¿ƒé›†åˆç±»é™ä½å¼€å‘æˆæœ¬ï¼Œè€Œéå®ç°æˆ‘ä»¬è‡ªå·±çš„é›†åˆç±». 

ï¼ˆ2ï¼‰éšç€ä½¿ç”¨ç»è¿‡ä¸¥æ ¼æµ‹è¯•çš„é›†åˆæ¡†æ¶ç±»ï¼Œä»£ç è´¨é‡ä¼šå¾—åˆ°æé«˜. 

ï¼ˆ3ï¼‰é€šè¿‡ä½¿ç”¨JDKé™„å¸¦çš„é›†åˆç±»ï¼Œå¯ä»¥é™ä½ä»£ç ç»´æŠ¤æˆæœ¬. 

ï¼ˆ4ï¼‰å¤ç”¨æ€§å’Œå¯æ“ä½œæ€§. 

> **2.é›†åˆæ¡†æ¶ä¸­çš„æ³›å‹æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ**

1.Java1.5å¼•å…¥äº†æ³›å‹ï¼Œæ‰€æœ‰çš„é›†åˆæ¥å£å’Œå®ç°éƒ½å¤§é‡åœ°ä½¿ç”¨å®ƒ. 

2.æ³›å‹å…è®¸æˆ‘ä»¬ä¸ºé›†åˆæä¾›ä¸€ä¸ªå¯ä»¥å®¹çº³çš„å¯¹è±¡ç±»å‹ï¼Œå› æ­¤ï¼Œå¦‚æœä½ æ·»åŠ å…¶å®ƒç±»å‹çš„ä»»ä½•å…ƒç´ ï¼Œå®ƒä¼šåœ¨ç¼–è¯‘æ—¶æŠ¥é”™. 

3.è¿™é¿å…äº†åœ¨è¿è¡Œæ—¶å‡ºç°ClassCastExceptionï¼Œå› ä¸ºä½ å°†ä¼šåœ¨ç¼–è¯‘æ—¶å¾—åˆ°æŠ¥é”™ä¿¡æ¯. 

4.æ³›å‹ä¹Ÿä½¿å¾—ä»£ç æ•´æ´ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨æ˜¾å¼è½¬æ¢å’ŒinstanceOfæ“ä½œç¬¦. 

5.å®ƒä¹Ÿç»™è¿è¡Œæ—¶å¸¦æ¥å¥½å¤„ï¼Œå› ä¸ºä¸ä¼šäº§ç”Ÿç±»å‹æ£€æŸ¥çš„å­—èŠ‚ç æŒ‡ä»¤. 

> **3.Javaé›†åˆæ¡†æ¶çš„åŸºç¡€æ¥å£æœ‰å“ªäº›ï¼Ÿ**

Collectionä¸ºé›†åˆå±‚çº§çš„æ ¹æ¥å£. ä¸€ä¸ªé›†åˆä»£è¡¨ä¸€ç»„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡å³ä¸ºå®ƒçš„å…ƒç´ . Javaå¹³å°ä¸æä¾›è¿™ä¸ªæ¥å£ä»»ä½•ç›´æ¥çš„å®ç°. 

Setæ˜¯ä¸€ä¸ªä¸èƒ½åŒ…å«é‡å¤å…ƒç´ çš„é›†åˆ. è¿™ä¸ªæ¥å£å¯¹æ•°å­¦é›†åˆæŠ½è±¡è¿›è¡Œå»ºæ¨¡ï¼Œè¢«ç”¨æ¥ä»£è¡¨é›†åˆï¼Œå°±å¦‚ä¸€å‰¯ç‰Œ. 

Listæ˜¯ä¸€ä¸ªæœ‰åºé›†åˆï¼Œå¯ä»¥åŒ…å«é‡å¤å…ƒç´ . ä½ å¯ä»¥é€šè¿‡å®ƒçš„ç´¢å¼•æ¥è®¿é—®ä»»ä½•å…ƒç´ . Listæ›´åƒé•¿åº¦åŠ¨æ€å˜æ¢çš„æ•°ç»„. 

Mapæ˜¯ä¸€ä¸ªå°†keyæ˜ å°„åˆ°valueçš„å¯¹è±¡.ä¸€ä¸ªMapä¸èƒ½åŒ…å«é‡å¤çš„keyï¼šæ¯ä¸ªkeyæœ€å¤šåªèƒ½æ˜ å°„ä¸€ä¸ªvalue. 

ä¸€äº›å…¶å®ƒçš„æ¥å£æœ‰Queueã€Dequeueã€SortedSetã€SortedMapå’ŒListIterator. 

> **4.ä¸ºä½•Collectionä¸ä»Cloneableå’ŒSerializableæ¥å£ç»§æ‰¿ï¼Ÿ**

Collectionæ¥å£æŒ‡å®šä¸€ç»„å¯¹è±¡ï¼Œå¯¹è±¡å³ä¸ºå®ƒçš„å…ƒç´ . å¦‚ä½•ç»´æŠ¤è¿™äº›å…ƒç´ ç”±Collectionçš„å…·ä½“å®ç°å†³å®š. ä¾‹å¦‚ï¼Œä¸€äº›å¦‚Listçš„Collectionå®ç°å…è®¸é‡å¤çš„å…ƒç´ ï¼Œè€Œå…¶å®ƒçš„å¦‚Setå°±ä¸å…è®¸. 

å¾ˆå¤šCollectionå®ç°æœ‰ä¸€ä¸ªå…¬æœ‰çš„cloneæ–¹æ³•. ç„¶è€Œï¼ŒæŠŠå®ƒæ”¾åˆ°é›†åˆçš„æ‰€æœ‰å®ç°ä¸­ä¹Ÿæ˜¯æ²¡æœ‰æ„ä¹‰çš„. è¿™æ˜¯å› ä¸ºCollectionæ˜¯ä¸€ä¸ªæŠ½è±¡è¡¨ç°. é‡è¦çš„æ˜¯å®ç°. 

å½“ä¸å…·ä½“å®ç°æ‰“äº¤é“çš„æ—¶å€™ï¼Œå…‹éš†æˆ–åºåˆ—åŒ–çš„è¯­ä¹‰å’Œå«ä¹‰æ‰å‘æŒ¥ä½œç”¨. æ‰€ä»¥ï¼Œå…·ä½“å®ç°åº”è¯¥å†³å®šå¦‚ä½•å¯¹å®ƒè¿›è¡Œå…‹éš†æˆ–åºåˆ—åŒ–ï¼Œæˆ–å®ƒæ˜¯å¦å¯ä»¥è¢«å…‹éš†æˆ–åºåˆ—åŒ–. ç‚¹å‡»[è¿™é‡Œ](http://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&mid=2247484372&idx=1&sn=381af66344b4b50d033c38e51bcb0e21&chksm=eb5386e2dc240ff4fbee79af445ffeb3856da484a8f5206bcaf4531f0d510564943b213f948c&scene=21#wechat_redirect)ä¸€æ–‡å­¦ä¼šåºåˆ—åŒ–. 

åœ¨æ‰€æœ‰çš„å®ç°ä¸­æˆæƒå…‹éš†å’Œåºåˆ—åŒ–ï¼Œæœ€ç»ˆå¯¼è‡´æ›´å°‘çš„çµæ´»æ€§å’Œæ›´å¤šçš„é™åˆ¶. ç‰¹å®šçš„å®ç°åº”è¯¥å†³å®šå®ƒæ˜¯å¦å¯ä»¥è¢«å…‹éš†å’Œåºåˆ—åŒ–. ç‚¹å‡»[è¿™é‡Œ](http://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&mid=2247484372&idx=1&sn=381af66344b4b50d033c38e51bcb0e21&chksm=eb5386e2dc240ff4fbee79af445ffeb3856da484a8f5206bcaf4531f0d510564943b213f948c&scene=21#wechat_redirect)ä¸€æ–‡å­¦ä¼šåºåˆ—åŒ–. 

> **5.ä¸ºä½•Mapæ¥å£ä¸ç»§æ‰¿Collectionæ¥å£ï¼Ÿ**

å°½ç®¡Mapæ¥å£å’Œå®ƒçš„å®ç°ä¹Ÿæ˜¯é›†åˆæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œä½†Mapä¸æ˜¯é›†åˆï¼Œé›†åˆä¹Ÿä¸æ˜¯Map. å› æ­¤ï¼ŒMapç»§æ‰¿Collectionæ¯«æ— æ„ä¹‰ï¼Œåä¹‹äº¦ç„¶. 

å¦‚æœMapç»§æ‰¿Collectionæ¥å£ï¼Œé‚£ä¹ˆå…ƒç´ å»å“ªå„¿ï¼ŸMapåŒ…å«key-valueå¯¹ï¼Œå®ƒæä¾›æŠ½å–keyæˆ–valueåˆ—è¡¨é›†åˆçš„æ–¹æ³•ï¼Œä½†æ˜¯å®ƒä¸é€‚åˆâ€œä¸€ç»„å¯¹è±¡â€è§„èŒƒ. 

> **6.Iteratoræ˜¯ä»€ä¹ˆï¼Ÿ**

Iteratoræ¥å£æä¾›éå†ä»»ä½•Collectionçš„æ¥å£. æˆ‘ä»¬å¯ä»¥ä»ä¸€ä¸ªCollectionä¸­ä½¿ç”¨è¿­ä»£å™¨æ–¹æ³•æ¥è·å–è¿­ä»£å™¨å®ä¾‹. è¿­ä»£å™¨å–ä»£äº†Javaé›†åˆæ¡†æ¶ä¸­çš„Enumeration. è¿­ä»£å™¨å…è®¸è°ƒç”¨è€…åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ç§»é™¤å…ƒç´ . 

> **7.Enumerationå’ŒIteratoræ¥å£çš„åŒºåˆ«ï¼Ÿ**

Enumerationçš„é€Ÿåº¦æ˜¯Iteratorçš„ä¸¤å€ï¼Œä¹Ÿä½¿ç”¨æ›´å°‘çš„å†…å­˜. Enumerationæ˜¯éå¸¸åŸºç¡€çš„ï¼Œä¹Ÿæ»¡è¶³äº†åŸºç¡€çš„éœ€è¦. ä½†æ˜¯ï¼Œä¸Enumerationç›¸æ¯”ï¼ŒIteratoræ›´åŠ å®‰å…¨ï¼Œå› ä¸ºå½“ä¸€ä¸ªé›†åˆæ­£åœ¨è¢«éå†çš„æ—¶å€™ï¼Œå®ƒä¼šé˜»æ­¢å…¶å®ƒçº¿ç¨‹å»ä¿®æ”¹é›†åˆ. 

è¿­ä»£å™¨å–ä»£äº†Javaé›†åˆæ¡†æ¶ä¸­çš„Enumeration. è¿­ä»£å™¨å…è®¸è°ƒç”¨è€…ä»é›†åˆä¸­ç§»é™¤å…ƒç´ ï¼Œè€ŒEnumerationä¸èƒ½åšåˆ°. ä¸ºäº†ä½¿å®ƒçš„åŠŸèƒ½æ›´åŠ æ¸…æ™°ï¼Œè¿­ä»£å™¨æ–¹æ³•åå·²ç»ç»è¿‡æ”¹å–„. 

> **8.ä¸ºä½•æ²¡æœ‰åƒIterator.add()è¿™æ ·çš„æ–¹æ³•ï¼Œå‘é›†åˆä¸­æ·»åŠ å…ƒç´ ï¼Ÿ**

è¯­ä¹‰ä¸æ˜ï¼Œå·²çŸ¥çš„æ˜¯ï¼ŒIteratorçš„åè®®ä¸èƒ½ç¡®ä¿è¿­ä»£çš„æ¬¡åº. ç„¶è€Œè¦æ³¨æ„ï¼ŒListIteratoræ²¡æœ‰æä¾›ä¸€ä¸ªaddæ“ä½œï¼Œå®ƒè¦ç¡®ä¿è¿­ä»£çš„é¡ºåº. 

> **9.ä¸ºä½•è¿­ä»£å™¨æ²¡æœ‰ä¸€ä¸ªæ–¹æ³•å¯ä»¥ç›´æ¥è·å–ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œè€Œä¸éœ€è¦ç§»åŠ¨æ¸¸æ ‡ï¼Ÿ**

å®ƒå¯ä»¥åœ¨å½“å‰Iteratorçš„é¡¶å±‚å®ç°ï¼Œä½†æ˜¯å®ƒç”¨å¾—å¾ˆå°‘ï¼Œå¦‚æœå°†å®ƒåŠ åˆ°æ¥å£ä¸­ï¼Œæ¯ä¸ªç»§æ‰¿éƒ½è¦å»å®ç°å®ƒï¼Œè¿™æ²¡æœ‰æ„ä¹‰. 

> **10.Iteraterå’ŒListIteratorä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**

ï¼ˆ1ï¼‰æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Iteratoræ¥éå†Setå’ŒListé›†åˆï¼Œè€ŒListIteratoråªèƒ½éå†List. 

ï¼ˆ2ï¼‰Iteratoråªå¯ä»¥å‘å‰éå†ï¼Œè€ŒLIstIteratorå¯ä»¥åŒå‘éå†. 

ï¼ˆ3ï¼‰ListIteratorä»Iteratoræ¥å£ç»§æ‰¿ï¼Œç„¶åæ·»åŠ äº†ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼Œæ¯”å¦‚æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€æ›¿æ¢ä¸€ä¸ªå…ƒç´ ã€è·å–å‰é¢æˆ–åé¢å…ƒç´ çš„ç´¢å¼•ä½ç½®. 

> **11.é€šè¿‡è¿­ä»£å™¨fail-fastå±æ€§ï¼Œä½ æ˜ç™½äº†ä»€ä¹ˆï¼Ÿ**

æ¯æ¬¡æˆ‘ä»¬å°è¯•è·å–ä¸‹ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼ŒIterator fail-fastå±æ€§æ£€æŸ¥å½“å‰é›†åˆç»“æ„é‡Œçš„ä»»ä½•æ”¹åŠ¨. å¦‚æœå‘ç°ä»»ä½•æ”¹åŠ¨ï¼Œå®ƒæŠ›å‡ºConcurrentModificationException. Collectionä¸­æ‰€æœ‰Iteratorçš„å®ç°éƒ½æ˜¯æŒ‰fail-fastæ¥è®¾è®¡çš„ï¼ˆConcurrentHashMapå’ŒCopyOnWriteArrayListè¿™ç±»å¹¶å‘é›†åˆç±»é™¤å¤–ï¼‰. 

> **12.fail-fastä¸fail-safeæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**

Iteratorçš„fail-fastå±æ€§ä¸å½“å‰çš„é›†åˆå…±åŒèµ·ä½œç”¨ï¼Œå› æ­¤å®ƒä¸ä¼šå—åˆ°é›†åˆä¸­ä»»ä½•æ”¹åŠ¨çš„å½±å“. Java.utilåŒ…ä¸­çš„æ‰€æœ‰é›†åˆç±»éƒ½è¢«è®¾è®¡ä¸ºfail-fastçš„ï¼Œ

è€Œjava.util.concurrentä¸­çš„é›†åˆç±»éƒ½ä¸ºfail-safeçš„. 

Fallâ€”fastè¿­ä»£å™¨æŠ›å‡ºConcurrentModificationExceptionï¼Œ

fallâ€”safeè¿­ä»£å™¨ä»ä¸æŠ›å‡ºConcurrentModificationException. 

> **13.åœ¨è¿­ä»£ä¸€ä¸ªé›†åˆçš„æ—¶å€™ï¼Œå¦‚ä½•é¿å…ï¼Ÿ**

ConcurrentModificationExceptionï¼Ÿ

åœ¨éå†ä¸€ä¸ªé›†åˆçš„æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¹¶å‘é›†åˆç±»æ¥é¿å…ConcurrentModificationExceptionï¼Œæ¯”å¦‚ä½¿ç”¨CopyOnWriteArrayListï¼Œè€Œä¸æ˜¯ArrayList. 

> **14.ä¸ºä½•Iteratoræ¥å£æ²¡æœ‰å…·ä½“çš„å®ç°ï¼Ÿ**

Iteratoræ¥å£å®šä¹‰äº†éå†é›†åˆçš„æ–¹æ³•ï¼Œä½†å®ƒçš„å®ç°åˆ™æ˜¯é›†åˆå®ç°ç±»çš„è´£ä»». æ¯ä¸ªèƒ½å¤Ÿè¿”å›ç”¨äºéå†çš„Iteratorçš„é›†åˆç±»éƒ½æœ‰å®ƒè‡ªå·±çš„Iteratorå®ç°å†…éƒ¨ç±». 

è¿™å°±å…è®¸é›†åˆç±»å»é€‰æ‹©è¿­ä»£å™¨æ˜¯fail-fastè¿˜æ˜¯fail-safeçš„. æ¯”å¦‚ï¼ŒArrayListè¿­ä»£å™¨æ˜¯fail-fastçš„ï¼Œè€ŒCopyOnWriteArrayListè¿­ä»£å™¨æ˜¯fail-safeçš„. 

> **15.UnsupportedOperationExceptionæ˜¯ä»€ä¹ˆï¼Ÿ**

UnsupportedOperationExceptionæ˜¯ç”¨äºè¡¨æ˜æ“ä½œä¸æ”¯æŒçš„å¼‚å¸¸. åœ¨JDKç±»ä¸­å·²è¢«å¤§é‡è¿ç”¨ï¼Œåœ¨é›†åˆæ¡†æ¶java.util.Collections.UnmodifiableCollectionå°†ä¼šåœ¨æ‰€æœ‰addå’Œremoveæ“ä½œä¸­æŠ›å‡ºè¿™ä¸ªå¼‚å¸¸. 

> **16.hashCode()å’Œequals()æ–¹æ³•æœ‰ä½•é‡è¦æ€§ï¼Ÿ**

HashMapä½¿ç”¨Keyå¯¹è±¡çš„hashCode()å’Œequals()æ–¹æ³•å»å†³å®škey-valueå¯¹çš„ç´¢å¼•. ç‚¹å‡»[è¿™é‡Œ](http://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&mid=2247486439&idx=1&sn=3afb389bca737a1799f7cdee92a7dc99&chksm=eb538ed1dc2407c7782cdf71344786c3db5c32469fdfb1ab97e58364c2902dbcde09ed98e16a&scene=21#wechat_redirect)ä¸€æ–‡ææ‡‚å®ƒä»¬ä¹‹é—´çš„å…³ç³». 

å½“æˆ‘ä»¬è¯•ç€ä»HashMapä¸­è·å–å€¼çš„æ—¶å€™ï¼Œè¿™äº›æ–¹æ³•ä¹Ÿä¼šè¢«ç”¨åˆ°. å¦‚æœè¿™äº›æ–¹æ³•æ²¡æœ‰è¢«æ­£ç¡®åœ°å®ç°ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªä¸åŒKeyä¹Ÿè®¸ä¼šäº§ç”Ÿç›¸åŒçš„hashCode()å’Œequals()è¾“å‡ºï¼ŒHashMapå°†ä¼šè®¤ä¸ºå®ƒä»¬æ˜¯ç›¸åŒçš„ï¼Œç„¶åè¦†ç›–å®ƒä»¬ï¼Œè€ŒéæŠŠå®ƒä»¬å­˜å‚¨åˆ°ä¸åŒçš„åœ°æ–¹. 

åŒæ ·çš„ï¼Œæ‰€æœ‰ä¸å…è®¸å­˜å‚¨é‡å¤æ•°æ®çš„é›†åˆç±»éƒ½ä½¿ç”¨hashCode()å’Œequals()å»æŸ¥æ‰¾é‡å¤ï¼Œæ‰€ä»¥æ­£ç¡®å®ç°å®ƒä»¬éå¸¸é‡è¦. equals()å’ŒhashCode()çš„å®ç°åº”è¯¥éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š

1.å¦‚æœo1.equals(o2)ï¼Œé‚£ä¹ˆo1.hashCode() == o2.hashCode()æ€»æ˜¯ä¸ºtrueçš„. 

2.å¦‚æœo1.hashCode() == o2.hashCode()ï¼Œå¹¶ä¸æ„å‘³ç€o1.equals(o2)ä¼šä¸ºtrue. 

> **17.Mapæ¥å£æä¾›äº†å“ªäº›ä¸åŒçš„é›†åˆè§†å›¾ï¼Ÿ**

Mapæ¥å£æä¾›ä¸‰ä¸ªé›†åˆè§†å›¾ï¼š

1ï¼‰Set keyset()ï¼šè¿”å›mapä¸­åŒ…å«çš„æ‰€æœ‰keyçš„ä¸€ä¸ªSetè§†å›¾. é›†åˆæ˜¯å—mapæ”¯æŒçš„ï¼Œmapçš„å˜åŒ–ä¼šåœ¨é›†åˆä¸­åæ˜ å‡ºæ¥ï¼Œåä¹‹äº¦ç„¶. å½“ä¸€ä¸ªè¿­ä»£å™¨æ­£åœ¨éå†ä¸€ä¸ªé›†åˆæ—¶ï¼Œè‹¥mapè¢«ä¿®æ”¹äº†ï¼ˆé™¤è¿­ä»£å™¨è‡ªèº«çš„ç§»é™¤æ“ä½œä»¥å¤–ï¼‰ï¼Œè¿­ä»£å™¨çš„ç»“æœä¼šå˜ä¸ºæœªå®šä¹‰. é›†åˆæ”¯æŒé€šè¿‡Iteratorçš„Removeã€Set.removeã€removeAllã€retainAllå’Œclearæ“ä½œè¿›è¡Œå…ƒç´ ç§»é™¤ï¼Œä»mapä¸­ç§»é™¤å¯¹åº”çš„æ˜ å°„. 

å®ƒä¸æ”¯æŒaddå’ŒaddAllæ“ä½œ. 

2ï¼‰Collection values()ï¼šè¿”å›ä¸€ä¸ªmapä¸­åŒ…å«çš„æ‰€æœ‰valueçš„ä¸€ä¸ªCollectionè§†å›¾. è¿™ä¸ªcollectionå—mapæ”¯æŒçš„ï¼Œmapçš„å˜åŒ–ä¼šåœ¨collectionä¸­åæ˜ å‡ºæ¥ï¼Œåä¹‹äº¦ç„¶. å½“ä¸€ä¸ªè¿­ä»£å™¨æ­£åœ¨éå†ä¸€ä¸ªcollectionæ—¶ï¼Œè‹¥mapè¢«ä¿®æ”¹äº†ï¼ˆé™¤è¿­ä»£å™¨è‡ªèº«çš„ç§»é™¤æ“ä½œä»¥å¤–ï¼‰ï¼Œè¿­ä»£å™¨çš„ç»“æœä¼šå˜ä¸ºæœªå®šä¹‰. é›†åˆæ”¯æŒé€šè¿‡Iteratorçš„Removeã€Set.removeã€removeAllã€retainAllå’Œclearæ“ä½œè¿›è¡Œå…ƒç´ ç§»é™¤ï¼Œä»mapä¸­ç§»é™¤å¯¹åº”çš„æ˜ å°„. å®ƒä¸æ”¯æŒaddå’ŒaddAllæ“ä½œ. 

3ï¼‰Set> entrySet()ï¼šè¿”å›ä¸€ä¸ªmapé’ŸåŒ…å«çš„æ‰€æœ‰æ˜ å°„çš„ä¸€ä¸ªé›†åˆè§†å›¾. è¿™ä¸ªé›†åˆå—mapæ”¯æŒçš„ï¼Œmapçš„å˜åŒ–ä¼šåœ¨collectionä¸­åæ˜ å‡ºæ¥ï¼Œåä¹‹äº¦ç„¶. å½“ä¸€ä¸ªè¿­ä»£å™¨æ­£åœ¨éå†ä¸€ä¸ªé›†åˆæ—¶ï¼Œè‹¥mapè¢«ä¿®æ”¹äº†ï¼ˆé™¤è¿­ä»£å™¨è‡ªèº«çš„ç§»é™¤æ“ä½œï¼Œä»¥åŠå¯¹è¿­ä»£å™¨è¿”å›çš„entryè¿›è¡ŒsetValueå¤–ï¼‰ï¼Œè¿­ä»£å™¨çš„ç»“æœä¼šå˜ä¸ºæœªå®šä¹‰. é›†åˆæ”¯æŒé€šè¿‡Iteratorçš„Removeã€Set.removeã€removeAllã€retainAllå’Œclearæ“ä½œè¿›è¡Œå…ƒç´ ç§»é™¤ï¼Œä»mapä¸­ç§»é™¤å¯¹åº”çš„æ˜ å°„. å®ƒä¸æ”¯æŒaddå’ŒaddAllæ“ä½œ. 

> **18.HashMapå’ŒHashTableæœ‰ä½•ä¸åŒï¼Ÿ**

ï¼ˆ1ï¼‰HashMapå…è®¸keyå’Œvalueä¸ºnullï¼Œè€ŒHashTableä¸å…è®¸. 

ï¼ˆ2ï¼‰HashTableæ˜¯åŒæ­¥çš„ï¼Œè€ŒHashMapä¸æ˜¯. æ‰€ä»¥HashMapé€‚åˆå•çº¿ç¨‹ç¯å¢ƒï¼ŒHashTableé€‚åˆå¤šçº¿ç¨‹ç¯å¢ƒ. 

ï¼ˆ3ï¼‰åœ¨Java1.4ä¸­å¼•å…¥äº†LinkedHashMapï¼ŒHashMapçš„ä¸€ä¸ªå­ç±»ï¼Œå‡å¦‚ä½ æƒ³è¦éå†é¡ºåºï¼Œä½ å¾ˆå®¹æ˜“ä»HashMapè½¬å‘LinkedHashMapï¼Œä½†æ˜¯HashTableä¸æ˜¯è¿™æ ·çš„ï¼Œå®ƒçš„é¡ºåºæ˜¯ä¸å¯é¢„çŸ¥çš„. 

ï¼ˆ4ï¼‰HashMapæä¾›å¯¹keyçš„Setè¿›è¡Œéå†ï¼Œå› æ­¤å®ƒæ˜¯fail-fastçš„ï¼Œä½†HashTableæä¾›å¯¹keyçš„Enumerationè¿›è¡Œéå†ï¼Œå®ƒä¸æ”¯æŒfail-fast. 

ï¼ˆ5ï¼‰HashTableè¢«è®¤ä¸ºæ˜¯ä¸ªé—ç•™çš„ç±»ï¼Œå¦‚æœä½ å¯»æ±‚åœ¨è¿­ä»£çš„æ—¶å€™ä¿®æ”¹Mapï¼Œä½ åº”è¯¥ä½¿ç”¨CocurrentHashMap. 

> **19.å¦‚ä½•å†³å®šé€‰ç”¨HashMapè¿˜æ˜¯TreeMapï¼Ÿ**

å¯¹äºåœ¨Mapä¸­æ’å…¥ã€åˆ é™¤å’Œå®šä½å…ƒç´ è¿™ç±»æ“ä½œï¼ŒHashMapæ˜¯æœ€å¥½çš„é€‰æ‹©. ç„¶è€Œï¼Œå‡å¦‚ä½ éœ€è¦å¯¹ä¸€ä¸ªæœ‰åºçš„keyé›†åˆè¿›è¡Œéå†ï¼ŒTreeMapæ˜¯æ›´å¥½çš„é€‰æ‹©. åŸºäºä½ çš„collectionçš„å¤§å°ï¼Œä¹Ÿè®¸å‘HashMapä¸­æ·»åŠ å…ƒç´ ä¼šæ›´å¿«ï¼Œå°†mapæ¢ä¸ºTreeMapè¿›è¡Œæœ‰åºkeyçš„éå†. 

> **20.ArrayListå’ŒVectoræœ‰ä½•å¼‚åŒç‚¹ï¼Ÿ**

ArrayListå’ŒVectoråœ¨å¾ˆå¤šæ—¶å€™éƒ½å¾ˆç±»ä¼¼. 

ï¼ˆ1ï¼‰ä¸¤è€…éƒ½æ˜¯åŸºäºç´¢å¼•çš„ï¼Œå†…éƒ¨ç”±ä¸€ä¸ªæ•°ç»„æ”¯æŒ. 

ï¼ˆ2ï¼‰ä¸¤è€…ç»´æŠ¤æ’å…¥çš„é¡ºåºï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ’å…¥é¡ºåºæ¥è·å–å…ƒç´ . 

ï¼ˆ3ï¼‰ArrayListå’ŒVectorçš„è¿­ä»£å™¨å®ç°éƒ½æ˜¯fail-fastçš„. 

ï¼ˆ4ï¼‰ArrayListå’ŒVectorä¸¤è€…å…è®¸nullå€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç´¢å¼•å€¼å¯¹å…ƒç´ è¿›è¡Œéšæœºè®¿é—®. 

ä»¥ä¸‹æ˜¯ArrayListå’ŒVectorçš„ä¸åŒç‚¹. 

ï¼ˆ1ï¼‰Vectoræ˜¯åŒæ­¥çš„ï¼Œè€ŒArrayListä¸æ˜¯. ç„¶è€Œï¼Œå¦‚æœä½ å¯»æ±‚åœ¨è¿­ä»£çš„æ—¶å€™å¯¹åˆ—è¡¨è¿›è¡Œæ”¹å˜ï¼Œä½ åº”è¯¥ä½¿ç”¨CopyOnWriteArrayList. 

ï¼ˆ2ï¼‰ArrayListæ¯”Vectorå¿«ï¼Œå®ƒå› ä¸ºæœ‰åŒæ­¥ï¼Œä¸ä¼šè¿‡è½½. 

ï¼ˆ3ï¼‰ArrayListæ›´åŠ é€šç”¨ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Collectionså·¥å…·ç±»è½»æ˜“åœ°è·å–åŒæ­¥åˆ—è¡¨å’Œåªè¯»åˆ—è¡¨. 

> **21.Arrayå’ŒArrayListæœ‰ä½•åŒºåˆ«ï¼Ÿä»€ä¹ˆæ—¶å€™æ›´é€‚åˆç”¨Arrayï¼Ÿ**

Arrayå¯ä»¥å®¹çº³åŸºæœ¬ç±»å‹å’Œå¯¹è±¡ï¼Œè€ŒArrayListåªèƒ½å®¹çº³å¯¹è±¡. 

Arrayæ˜¯æŒ‡å®šå¤§å°çš„ï¼Œè€ŒArrayListå¤§å°æ˜¯å›ºå®šçš„. 

Arrayæ²¡æœ‰æä¾›ArrayListé‚£ä¹ˆå¤šåŠŸèƒ½ï¼Œæ¯”å¦‚addAllã€removeAllå’Œiteratorç­‰. å°½ç®¡ArrayListæ˜æ˜¾æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œä½†ä¹Ÿæœ‰äº›æ—¶å€™Arrayæ¯”è¾ƒå¥½ç”¨. 

ï¼ˆ1ï¼‰å¦‚æœåˆ—è¡¨çš„å¤§å°å·²ç»æŒ‡å®šï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯å­˜å‚¨å’Œéå†å®ƒä»¬. 

ï¼ˆ2ï¼‰å¯¹äºéå†åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå°½ç®¡Collectionsä½¿ç”¨è‡ªåŠ¨è£…ç®±æ¥å‡è½»ç¼–ç ä»»åŠ¡ï¼Œåœ¨æŒ‡å®šå¤§å°çš„åŸºæœ¬ç±»å‹çš„åˆ—è¡¨ä¸Šå·¥ä½œä¹Ÿä¼šå˜å¾—å¾ˆæ…¢. 

ï¼ˆ3ï¼‰å¦‚æœä½ è¦ä½¿ç”¨å¤šç»´æ•°ç»„ï¼Œä½¿ç”¨[][]æ¯”List>æ›´å®¹æ˜“. 

> **22.ArrayListå’ŒLinkedListæœ‰ä½•åŒºåˆ«ï¼Ÿ**

ArrayListå’ŒLinkedListä¸¤è€…éƒ½å®ç°äº†Listæ¥å£ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´æœ‰äº›ä¸åŒ. 

1ï¼‰ArrayListæ˜¯ç”±Arrayæ‰€æ”¯æŒçš„åŸºäºä¸€ä¸ªç´¢å¼•çš„æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥å®ƒæä¾›å¯¹å…ƒç´ çš„éšæœºè®¿é—®ï¼Œå¤æ‚åº¦ä¸ºO(1)ï¼Œä½†LinkedListå­˜å‚¨ä¸€ç³»åˆ—çš„èŠ‚ç‚¹æ•°æ®ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¸å‰ä¸€ä¸ªå’Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹ç›¸è¿æ¥. æ‰€ä»¥ï¼Œå°½ç®¡æœ‰ä½¿ç”¨ç´¢å¼•è·å–å…ƒç´ çš„æ–¹æ³•ï¼Œå†…éƒ¨å®ç°æ˜¯ä»èµ·å§‹ç‚¹å¼€å§‹éå†ï¼Œéå†åˆ°ç´¢å¼•çš„èŠ‚ç‚¹ç„¶åè¿”å›å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œæ¯”ArrayListè¦æ…¢. 

2ï¼‰ä¸ArrayListç›¸æ¯”ï¼Œåœ¨LinkedListä¸­æ’å…¥ã€æ·»åŠ å’Œåˆ é™¤ä¸€ä¸ªå…ƒç´ ä¼šæ›´å¿«ï¼Œå› ä¸ºåœ¨ä¸€ä¸ªå…ƒç´ è¢«æ’å…¥åˆ°ä¸­é—´çš„æ—¶å€™ï¼Œä¸ä¼šæ¶‰åŠæ”¹å˜æ•°ç»„çš„å¤§å°ï¼Œæˆ–æ›´æ–°ç´¢å¼•. 

3ï¼‰LinkedListæ¯”ArrayListæ¶ˆè€—æ›´å¤šçš„å†…å­˜ï¼Œå› ä¸ºLinkedListä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨äº†å‰åèŠ‚ç‚¹çš„å¼•ç”¨. 

> **23.å“ªäº›é›†åˆç±»æä¾›å¯¹å…ƒç´ çš„éšæœºè®¿é—®ï¼Ÿ**

ArrayListã€HashMapã€TreeMapå’ŒHashTableç±»æä¾›å¯¹å…ƒç´ çš„éšæœºè®¿é—®. 

> **24.å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ**

Vectorã€HashTableã€Propertieså’ŒStackæ˜¯åŒæ­¥ç±»ï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨. Java1.5å¹¶å‘APIåŒ…æ‹¬ä¸€äº›é›†åˆç±»ï¼Œå…è®¸è¿­ä»£æ—¶ä¿®æ”¹ï¼Œå› ä¸ºå®ƒä»¬éƒ½å·¥ä½œåœ¨é›†åˆçš„å…‹éš†ä¸Šï¼Œæ‰€ä»¥å®ƒä»¬åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­æ˜¯å®‰å…¨çš„. ç‚¹å‡»[è¿™é‡Œ](http://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&mid=2247486446&idx=2&sn=cb4f3aff0427c5ac3ffe5b61e150f506&chksm=eb538ed8dc2407ceb91fffe3c3bd559d9b15537446f84eb3bfb1a80e67f5efee176ca468a07b&scene=21#wechat_redirect)ä¸€æ–‡ææ‡‚é—®ä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨. 

> **25.å¹¶å‘é›†åˆç±»æ˜¯ä»€ä¹ˆï¼Ÿ**

Java1.5å¹¶å‘åŒ…ï¼ˆjava.util.concurrentï¼‰åŒ…å«çº¿ç¨‹å®‰å…¨é›†åˆç±»ï¼Œå…è®¸åœ¨è¿­ä»£æ—¶ä¿®æ”¹é›†åˆ. è¿­ä»£å™¨è¢«è®¾è®¡ä¸ºfail-fastçš„ï¼Œä¼šæŠ›å‡ºConcurrentModificationException. ä¸€éƒ¨åˆ†ç±»ä¸ºï¼šCopyOnWriteArrayListã€ ConcurrentHashMapã€CopyOnWriteArraySet. 

> **26.é˜Ÿåˆ—å’Œæ ˆæ˜¯ä»€ä¹ˆï¼Œåˆ—å‡ºå®ƒä»¬çš„åŒºåˆ«ï¼Ÿ**

æ ˆå’Œé˜Ÿåˆ—ä¸¤è€…éƒ½è¢«ç”¨æ¥é¢„å­˜å‚¨æ•°æ®. java.util.Queueæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒçš„å®ç°ç±»åœ¨Javaå¹¶å‘åŒ…ä¸­. é˜Ÿåˆ—å…è®¸å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰æ£€ç´¢å…ƒç´ ï¼Œä½†å¹¶éæ€»æ˜¯è¿™æ ·. Dequeæ¥å£å…è®¸ä»ä¸¤ç«¯æ£€ç´¢å…ƒç´ . æ ˆä¸é˜Ÿåˆ—å¾ˆç›¸ä¼¼ï¼Œä½†å®ƒå…è®¸å¯¹å…ƒç´ è¿›è¡Œåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰è¿›è¡Œæ£€ç´¢. Stackæ˜¯ä¸€ä¸ªæ‰©å±•è‡ªVectorçš„ç±»ï¼Œè€ŒQueueæ˜¯ä¸€ä¸ªæ¥å£. 

> **27.Collectionsç±»æ˜¯ä»€ä¹ˆï¼Ÿ**

Java.util.Collectionsæ˜¯ä¸€ä¸ªå·¥å…·ç±»ä»…åŒ…å«é™æ€æ–¹æ³•ï¼Œå®ƒä»¬æ“ä½œæˆ–è¿”å›é›†åˆ. 

å®ƒåŒ…å«æ“ä½œé›†åˆçš„å¤šæ€ç®—æ³•ï¼Œè¿”å›ä¸€ä¸ªç”±æŒ‡å®šé›†åˆæ”¯æŒçš„æ–°é›†åˆå’Œå…¶å®ƒä¸€äº›å†…å®¹. è¿™ä¸ªç±»åŒ…å«é›†åˆæ¡†æ¶ç®—æ³•çš„æ–¹æ³•ï¼Œæ¯”å¦‚æŠ˜åŠæœç´¢ã€æ’åºã€æ··ç¼–å’Œé€†åºç­‰. 

> **28.Comparableå’ŒComparatoræ¥å£æœ‰ä½•åŒºåˆ«ï¼Ÿ**

Comparableå’ŒComparatoræ¥å£è¢«ç”¨æ¥å¯¹å¯¹è±¡é›†åˆæˆ–è€…æ•°ç»„è¿›è¡Œæ’åº. Comparableæ¥å£è¢«ç”¨æ¥æä¾›å¯¹è±¡çš„è‡ªç„¶æ’åºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥æä¾›åŸºäºå•ä¸ªé€»è¾‘çš„æ’åº. 

Comparatoræ¥å£è¢«ç”¨æ¥æä¾›ä¸åŒçš„æ’åºç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©éœ€è¦ä½¿ç”¨çš„Comparatoræ¥å¯¹ç»™å®šçš„å¯¹è±¡é›†åˆè¿›è¡Œæ’åº. 

> **29.æˆ‘ä»¬å¦‚ä½•å¯¹ä¸€ç»„å¯¹è±¡è¿›è¡Œæ’åºï¼Ÿ**

å¦‚æœæˆ‘ä»¬éœ€è¦å¯¹ä¸€ä¸ªå¯¹è±¡æ•°ç»„è¿›è¡Œæ’åºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Arrays.sort()æ–¹æ³•. å¦‚æœæˆ‘ä»¬éœ€è¦æ’åºä¸€ä¸ªå¯¹è±¡åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Collection.sort()æ–¹æ³•. 

ä¸¤ä¸ªç±»éƒ½æœ‰ç”¨äºè‡ªç„¶æ’åºï¼ˆä½¿ç”¨Comparableï¼‰æˆ–åŸºäºæ ‡å‡†çš„æ’åºï¼ˆä½¿ç”¨Comparatorï¼‰çš„é‡è½½æ–¹æ³•sort(). Collectionså†…éƒ¨ä½¿ç”¨æ•°ç»„æ’åºæ–¹æ³•ï¼Œæ‰€æœ‰å®ƒä»¬ä¸¤è€…éƒ½æœ‰ç›¸åŒçš„æ€§èƒ½ï¼Œåªæ˜¯Collectionséœ€è¦èŠ±æ—¶é—´å°†åˆ—è¡¨è½¬æ¢ä¸ºæ•°ç»„. 

> **30.å½“ä¸€ä¸ªé›†åˆè¢«ä½œä¸ºå‚æ•°ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå¦‚ä½•æ‰å¯ä»¥ç¡®ä¿å‡½æ•°ä¸èƒ½ä¿®æ”¹å®ƒï¼Ÿ**

åœ¨ä½œä¸ºå‚æ•°ä¼ é€’ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Collections.unmodifiableCollection(Collection c)æ–¹æ³•åˆ›å»ºä¸€ä¸ªåªè¯»é›†åˆï¼Œ

è¿™å°†ç¡®ä¿æ”¹å˜é›†åˆçš„ä»»ä½•æ“ä½œéƒ½ä¼šæŠ›å‡ºUnsupportedOperationException. 
